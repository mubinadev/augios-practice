/*! For license information please see common_dependicies-ce282879d29840652782.js.LICENSE.txt */
!function(t){function e(e){for(var n,o,i=e[0],a=e[1],s=0,u=[];s<i.length;s++)o=i[s],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&u.push(r[o][0]),r[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);for(c&&c(e);u.length;)u.shift()()}var n={},r={5:0};function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,o){n=r[t]=[e,o]}));e.push(n[2]=i);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(t){return o.p+"js/"+({}[t]||t)+"-"+{9:"db78e2f4db2b615029d7",10:"db2097857d5843c0d344",11:"ada26ed4c2e61d1a9273",12:"80c6333a8e159dc0f329"}[t]+".chunk.js"}(t);var c=new Error;a=function(e){s.onerror=s.onload=null,clearTimeout(u);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,n[1](c)}r[t]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(e)},o.m=t,o.c=n,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/packs/",o.oe=function(t){throw console.error(t),t};var i=window.webpackJsonp=window.webpackJsonp||[],a=i.push.bind(i);i.push=e,i=i.slice();for(var s=0;s<i.length;s++)e(i[s]);var c=a;o(o.s=39)}([function(t,e,n){"use strict";e.a=function(t){return{method:t,headers:{"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/json",Accept:"application/json",Referer:window.location.href}}}},function(t,e,n){"use strict";function r(t){for(var e=document.cookie.split("; "),n=e.length,r=0;r<n;r++){var o=e[r].split("=");if(o.shift()===t)return decodeURIComponent(o.join("="))}}function o(t,e,n){var r="";for(var o in n)r=r+o+"="+n[o]+"; ";document.cookie="".concat(t,"=").concat(e,"; ").concat(n)}n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(){var t=document.querySelector(".js-login-user-id");return t?t.dataset.loginUserId:0}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",(function(){return i}));var i=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";r(this,t),this.text=e,this.type=n,this.render()}var e,n,i;return e=t,(n=[{key:"animate",value:function(){var t=document.querySelector(".containerAnim_hidden"),e=t.querySelector("svg"),n="animate";"success"==this.type?t.classList.remove("containerAnim_hidden"):"error"==this.type&&(t.classList.add("containerAnim","containerAnim_error"),t.classList.remove("containerAnim_hidden")),e.classList.contains(n)||(e.classList.add(n),setTimeout((function(){e.classList.remove(n)}),1700))}},{key:"render",value:function(){var t=document.createElement("div"),e=document.createElement("div"),n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("fill","transparent"),r.setAttribute("stroke","#fff"),e.classList.add("containerText"),e.innerText=this.text,t.classList.add("containerAnim"),t.classList.add("containerAnim_hidden"),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttributeNS(null,"viewbox","0 0 48 48"),"success"==this.type?r.setAttribute("d","M 18 32.34 l -8.34 -8.34 -2.83 2.83 11.17 11.17 24 -24 -2.83 -2.83 z"):"error"==this.type&&r.setAttribute("d","M 9 19 h 30 v 10 h -30 Z"),n.appendChild(r),t.appendChild(n),t.appendChild(e),document.querySelector("body").appendChild(t),setTimeout((function(){t.remove()}),5e3)}}])&&o(e.prototype,n),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";e.a=function(t,e){var n=document.createElement(t);return e.forEach((function(t){"string"==typeof t&&n.classList.add(t)})),n}},function(t,e,n){"use strict";function r(t,e){document.getElementById("playlistMenu");document.querySelectorAll(t).forEach((function(t,n){var r=t,i=t.querySelector(".track__icon_favorite"),a=r.dataset.favorite;i.classList.toggle("track__icon_active"),0==a?(r.dataset.favorite=1,e&&0==n&&o(1)):1==a&&(r.dataset.favorite=0,e&&0==n&&o(0))}))}function o(t){if(playlistMenu.querySelectorAll(".playlistItem").length>1){var e=playlistMenu.querySelectorAll(".playlistItem")[1].querySelector(".playlistItem__count");t?e.innerText=+e.innerText+1:+e.innerText>0?e.innerText=+e.innerText-1:e.innerText="0"}}n.r(e),n.d(e,"toggleStar",(function(){return r}))},,function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var r=n(1);function o(){var t=void 0;Object(r.a)("access_reg")&&!Object(r.a)("logged_in")&&(Object(r.a)("s_declined")||(t=document.getElementById("slider-panel"))&&(t.style.display="block")),"/users/sign_up"!=document.location.pathname&&setTimeout(o,5e3);var e=document.querySelector("#close-slider-panel"),n=document.querySelector(".slider-no-btn");e&&(e.onclick=function(){t=document.getElementById("slider-panel"),Object(r.b)("s_declined",!0,{expires:1,path:"/"}),t.style.display="none"},n.onclick=function(){t=document.getElementById("slider-panel"),Object(r.b)("s_declined",!0,{expires:1,path:"/"}),t.style.display="none"})}function i(t){document.querySelector("#slider-panel .slider-text").innerHTML="<div classs='lider-text'>".concat(t,"</div>"),document.querySelector("#slider-panel").style.display="block"}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=function(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0},o=n(5),i=n(0),a=n(2),s=n(7);function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.favoriteAction=this.favoriteAction.bind(this)}var e,n,u;return e=t,(n=[{key:"initialization",value:function(){var t=this;this.isLogin=document.querySelector("[data-login-user-id]"),this.Btns=document.querySelectorAll(".js-favorite"),console.log("Favorite addlistener"),this.Btns.forEach((function(e){e.onclick=t.favoriteAction}))}},{key:"addListener",value:function(t){t.onclick=this.favoriteAction}},{key:"favoriteAction",value:function(t){var e=t.currentTarget.dataset.songId,n=+t.currentTarget.dataset.favorite;this.isLogin?this.setFavoriteForUser(t,e,n):this.setFavoriteForGuest(e,n)}},{key:"setFavoriteForGuest",value:function(t,e){console.log("for guest");var n=Object(i.a)("POST"),a="/favorites";0==e?n.body=JSON.stringify({favorites:{song_id:t}}):(n.method="DELETE",a="/favorites/".concat(t)),fetch(a,n).then((function(e){e.ok&&(Object(o.toggleStar)(".add-favorites-btn[data-song-id='".concat(t,"']"),!0),"true"===r("access_reg")&&"true"!=r("logged_in")&&"true"!=r("s_declined"))&&Object(s.b)("\u0427\u0442\u043e\u0431\u044b \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043b\u044e\u0431\u0438\u043c\u044b\u0435 \u0442\u0440\u0435\u043a\u0438 \u043c\u0435\u0436\u0434\u0443 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438 - \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043f\u043b\u0435\u0439\u043b\u0438\u0441\u0442\u044b.")})).catch((function(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0444\u0435\u0442\u0447\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0442\u0440\u0435\u043a\u0430 \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",t)}))}},{key:"setFavoriteForUser",value:function(t,e,n){console.log("for user");var r=t.currentTarget,s=Object(a.a)(),c=(r.querySelector(".track__icon"),document.querySelector("[data-a-song-id='song-".concat(e,"']"))),u=Object(i.a)("POST");if(u.body=JSON.stringify({favorite:!0,song_id:e}),0!==n&&""!==n){var l="/users/".concat(s,"/playlist/remove_song");fetch(l,u).then((function(t){Object(o.toggleStar)(".js-favorite[data-song-id='".concat(e,"']"),!0),!document.querySelectorAll(".js-edit").length&&document.querySelector(".myplaylist")&&c.remove()}))}else{var d="/users/".concat(s,"/playlists/add_to_favorites");fetch(d,u).then((function(t){Object(o.toggleStar)(".js-favorite[data-song-id='".concat(e,"']"),!0)})).catch((function(t){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0444\u0435\u0442\u0447\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0437\u0432\u0435\u0437\u0434\u044b \u0434\u043b\u044f \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",t)}))}}}])&&c(e.prototype,n),u&&c(e,u),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";e.a=function(t){var e,n,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];document.getElementById("playlistMenu")&&(e=document.getElementById("playlistMenu").dataset.favoriteId),(n=r?document.createElement("a"):document.createElement("span")).dataset.playlistId=t.id,n.classList.add("playlistItem"),n.setAttribute("href","/users/".concat(t.user.id,"/playlists/").concat(t.id));var o=document.createElement("div");o.classList.add("playlistItem__icon");var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"width","24"),i.setAttributeNS(null,"height","24"),i.setAttributeNS(null,"viewbox","0 0 24 24"),i.setAttributeNS(null,"fill","none");var a=document.createElementNS("http://www.w3.org/2000/svg","path");e==t.id?(a.setAttribute("d","M16.5706 21.6186C17.7924 22.261 18.9716 21.4055 18.738 20.0439L17.8623 14.9379C17.8708 14.9875 21.5592 11.3612 21.5592 11.3612C22.5477 10.3976 22.0985 9.01182 20.7313 8.81316L15.6046 8.0682C15.6544 8.07545 13.3453 3.44694 13.3453 3.44694C12.7344 2.20903 11.2776 2.20809 10.6662 3.44694L8.37348 8.09253C8.39578 8.04736 3.28026 8.81316 3.28026 8.81316C1.91414 9.01167 1.46308 10.3968 2.45236 11.3612L6.16209 14.9772C6.12602 14.9421 5.27355 20.0439 5.27355 20.0439C5.04019 21.4045 6.21819 22.2615 7.441 21.6186L12.0265 19.2079C11.9819 19.2313 16.5706 21.6186 16.5706 21.6186Z"),a.setAttribute("fill","#ffb300")):(a.setAttribute("d","M16 3C14.4633 3 13.0615 3.57771 12 4.52779C10.9385 3.57771 9.53671 3 8 3C4.68629 3 2 5.68629 2 9C2 13.8365 6.97858 18.511 11.5783 21.2383C11.8112 21.3828 12.1924 21.3809 12.4246 21.2363C16.994 18.5 22 13.8362 22 9C22 5.68629 19.3137 3 16 3ZM12.0057 19.1333C7.06067 15.9005 4 12.1242 4 9C4 6.79086 5.79086 5 8 5C8.99954 5 9.93695 5.36538 10.6662 6.01806L11.6285 6.87932C11.8364 7.06548 12.1663 7.06298 12.3715 6.87932L13.3338 6.01806C14.0631 5.36538 15.0005 5 16 5C18.2091 5 20 6.79086 20 9C20 12.2045 16.9507 15.9005 12.0057 19.1333Z"),a.setAttribute("fill","#a6cfe2")),i.appendChild(a),o.appendChild(i);var s=document.createElement("div");s.classList.add("playlistItem__title"),s.appendChild(document.createTextNode(t.title));var c=document.createElement("div");return c.classList.add("playlistItem__count"),c.appendChild(document.createTextNode(t.songs_count)),n.appendChild(o),n.appendChild(s),n.appendChild(c),n}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(12),o=n(9),i=n(3),a=n(5),s=n(0),c=n(2);function u(){u=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(q){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new x(o||[]);return r(a,"_invoke",{value:_(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(q){return{type:"throw",arg:q}}}t.wrap=l;var h={};function p(){}function f(){}function y(){}var v={};c(v,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(T([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=y.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function o(r,i,a,s){var c=d(t[r],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=L(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=d(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function L(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=d(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return f.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:f,configurable:!0}),f.displayName=c(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(k.prototype),c(k.prototype,a,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),c(b,s,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=T,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function l(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,o)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){l(i,r,o,a,s,"next",t)}function s(t){l(i,r,o,a,s,"throw",t)}a(void 0)}))}}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.addForm=document.querySelector("#add-form"),this.createNewPlaylist=document.querySelector("#new-list"),this.playlistMenu=document.querySelector("#playlistMenu"),this.overlay=document.querySelector(".overlay"),this.closeBtn=document.querySelector(".playlistMenu__close"),this.body=document.querySelector("body"),this.playlistMenuBody=document.querySelector(".playlistMenu__body"),this.songId=e,this.userId=Object(c.a)(),this.closeBtn.addEventListener("click",this.cancelPlaylistMenu.bind(this)),this.modalForm=new r.a(this.renderPlaylistItem.bind(this),this.songId)}var e,n,l,p,f,y,v;return e=t,n=[{key:"addToPlayList",value:(v=d(u().mark((function t(){var e=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.body.style.overflow="hidden",this.overlay.classList.add("overlay_visible"),this.overlay.style.zIndex=12,this.playlistMenu.classList.add("playlistMenu_animation"),setTimeout((function(){e.createNewPlaylist.focus()}),500),this.addLoaderSnipper(),this.initPlaylists().then((function(){var t=e.playlistMenuBody.querySelector(".loader-snipper");e.playlistMenuBody.removeChild(t),e.modalForm.keyboardNav(e.playlistMenu),e.createNewPlaylist.addEventListener("click",(function(t){e.cancelPlaylistMenu(),e.modalForm.newTitlePlaylist()})),e.overlay.addEventListener("click",(function(t){t.target===e.overlay&&(e.cancelPlaylistMenu(),e.body.style.overflow="")}))})),this.addListener();case 8:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"initPlaylists",value:(y=d(u().mark((function t(){var e,n,r,o=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("true"==this.playlistMenuBody.dataset.loaded){t.next=10;break}if(0===this.userId){t.next=9;break}return e="/api/v1/web/users/".concat(this.userId,"/playlists"),t.next=5,this.getPlaylists(e);case 5:n=t.sent,r=document.querySelector(".myplaylist"),n.forEach((function(t,e){0===e&&(o.playlistMenu.dataset.favoriteId=t.id),r&&r.dataset.playlistId==t.id||o.renderPlaylistItem(t)})),this.playlistMenuBody.dataset.loaded=!0;case 9:this.addListener();case 10:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"getPlaylists",value:(f=d(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,Object(s.a)("GET")).then((function(t){if(t.ok)return t.json()})).then((function(t){return t})).catch((function(t){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043b\u0435\u0439\u043b\u0438\u0441\u0442\u043e\u0432",t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(t){return f.apply(this,arguments)})},{key:"addListener",value:function(){var t=this;this.playlistMenu.querySelectorAll(".playlistItem").forEach((function(e){"new-list"!=e.id&&(e.onclick=function(e){e.preventDefault(),t.playlistId=e.currentTarget.dataset.playlistId,t.checkedPlayilist()})}))}},{key:"checkedPlayilist",value:(p=d(u().mark((function t(){var e,n,r=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===this.userId){t.next=8;break}return e="/users/".concat(this.userId,"/playlist/add_song"),(n=Object(s.a)("POST")).body=JSON.stringify({id:this.playlistId,song_id:this.songId}),t.next=6,fetch(e,n).then((function(t){t.ok?(new i.a("\u0422\u0440\u0435\u043a \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043f\u043b\u0435\u0439\u043b\u0438\u0441\u0442").animate(),r.playlistId===r.playlistMenu.dataset.favoriteId&&Object(a.toggleStar)(".js-favorite[data-song-id='".concat(r.songId,"']"),!0),t.json().then((function(t){r.renderPlaylistItem(t)}))):422==t.status?new i.a("\u0422\u0440\u0435\u043a \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u043f\u043b\u0435\u0439\u043b\u0438\u0441\u0442\u0435","error").animate():console.log("\u041e\u0448\u0438\u0431\u043a\u0430 HTTP: "+t.status)})).catch((function(t){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0440\u0435\u043a\u0430 \u0432 \u043f\u043b\u0435\u0439\u043b\u0438\u0441\u0442",t)}));case 6:return t.next=8,this.cancelPlaylistMenu();case 8:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"cancelPlaylistMenu",value:function(){this.body.style.overflow="",this.overlay.classList.remove("overlay_visible"),this.playlistMenu.classList.remove("playlistMenu_visible"),this.playlistMenu.classList.remove("playlistMenu_animation")}},{key:"renderPlaylistItem",value:function(t){var e=Object(o.a)(t,!1),n=this.playlistMenuBody.querySelector("[data-playlist-id='".concat(t.id,"']"));n?this.playlistMenuBody.replaceChild(e,n):this.playlistMenuBody.appendChild(e)}},{key:"addLoaderSnipper",value:function(){var t=document.createElement("div");t.classList.add("loader-snipper"),this.playlistMenuBody.appendChild(t)}}],n&&h(e.prototype,n),l&&h(e,l),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(3),o=n(2),i=n(0);function a(){a=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(q){u=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new x(o||[]);return r(a,"_invoke",{value:_(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(q){return{type:"throw",arg:q}}}t.wrap=l;var h={};function p(){}function f(){}function y(){}var v={};u(v,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(T([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=y.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function o(r,i,a,s){var c=d(t[r],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=L(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=d(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function L(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=d(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return f.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:f,configurable:!0}),f.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(k.prototype),u(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=T,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function s(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,o)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;c(this,t),this.addForm=document.querySelector("#add-form"),this.addForm.style.zIndex=13,this.input=this.addForm.querySelector(".add-form__input"),this.addFormAnim=this.addForm.querySelector(".add-form"),this.body=document.querySelector("body"),this.plPage=document.querySelectorAll(".favoritePlaylist"),this.myPlaylistBody=document.querySelector(".myplaylist__body"),this.renderPlaylist=e,this.songId=r,document.getElementById("cancel").onclick=function(){n.cancelAddForm()},document.getElementById("send").onclick=function(){n.submitNewPlayList()}}var e,n,l,d,h;return e=t,n=[{key:"newTitlePlaylist",value:function(){var t=this;this.keyboardNav(this.addForm),this.addFormAnim.classList.add("add-form_animation"),this.addForm.classList.add("overlay_visible"),setTimeout((function(){t.input.focus(),t.input.selectionStart=t.input.value.length}),0)}},{key:"keyboardNav",value:function(t){var e=this,n=t.querySelectorAll('a[href], input:not([disabled]), button:not([disabled]), [tabindex="0"]'),r=(n=Array.prototype.slice.call(n))[0],o=n[n.length-1];t.onkeydown=function(t){27===t.keyCode&&e.cancelAddForm(),9===t.keyCode&&(t.shiftKey?document.activeElement===r&&(t.preventDefault(),o.focus()):document.activeElement===o&&(t.preventDefault(),r.focus()))}}},{key:"cancelAddForm",value:function(){this.body.style.overflow="",this.addFormAnim.classList.remove("add-form_animation"),this.addForm.classList.remove("overlay_visible")}},{key:"submitNewPlayList",value:(d=a().mark((function t(){var e,n,s,c,u,l=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===this.input.value){t.next=13;break}return this.body.style.overflow="",n=new r.a("\u041f\u043b\u0435\u0439\u043b\u0438\u0441\u0442 ".concat(this.input.value," \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d")),e=this.songId?JSON.stringify({song_id:this.songId,title:this.input.value}):JSON.stringify({title:this.input.value}),s=Object(o.a)(),c="/users/".concat(s,"/playlists"),(u=Object(i.a)("POST")).body=e,t.next=10,fetch(c,u).then((function(t){t.ok?t.json().then((function(t){l.plPage.length>0?(console.log("inplaylisr"),l.myPlaylistBody.append(l.renderPlaylist(t))):(console.log("mymusic"),l.renderPlaylist(t)),n.animate()})):console.log("\u041e\u0448\u0438\u0431\u043a\u0430 HTTP: "+t.status)})).catch((function(t){console.log("caught it!",t)}));case 10:this.cancelAddForm(),t.next=16;break;case 13:this.cancelAddForm(),new r.a("\u041e\u0448\u0438\u0431\u043a\u0430: \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043b\u0435\u0439\u043b\u0438\u0441\u0442\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c","error").animate();case 16:case"end":return t.stop()}}),t,this)})),h=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=d.apply(t,e);function i(t){s(o,n,r,i,a,"next",t)}function a(t){s(o,n,r,i,a,"throw",t)}i(void 0)}))},function(){return h.apply(this,arguments)})}],n&&u(e.prototype,n),l&&u(e,l),Object.defineProperty(e,"prototype",{writable:!1}),t}()},,,function(t,e,n){"use strict";function r(t){var e=document.createElement("a"),n=document.createElement("article"),r=function(t){var e=document.createElement("picture"),n=document.createElement("source"),r=document.createElement("source"),o=document.createElement("IMG");return n.setAttribute("srset",t.cover.g_large),n.setAttribute("type","image/webp"),r.setAttribute("srset",t.cover.large),r.setAttribute("type","image/jpeg"),o.setAttribute("src",t.cover.large),o.setAttribute("alt",t.name_full),o.classList.add("article-item__img"),e.append(n,r,o),e}(t),o=document.createElement("article");return e.setAttribute("href","/events/".concat(t.id,"-").concat(t.name_url)),e.classList.add("article-item"),n.classList.add("article-item__image"),o.classList.add("article-item__caption"),o.innerText=t.name_full,n.appendChild(r),n.appendChild(o),e.appendChild(n),e}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(11);function o(){var t=document.querySelectorAll(".js-add-more-btn");return 0!=t.length&&t.forEach((function(t){t.style.display="",t.addEventListener("click",(function(){var t=this.dataset.songId;t&&new r.a(t).addToPlayList()}))})),t}},,,function(t,e,n){"use strict";function r(t){if(void 0!==t)return"string"===typeof t&&""!==t?t:t.micro?t.micro:"https://i.mp3party.net/default_song_image_micro.png"}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(4),o=n(19);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,a=[{key:"renderHTML",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(r.a)("div",["track","song-item"]);n.dataset.aSongId="song-".concat(t.id);var i=Object(o.a)(t.image),a='\n                        <div class="track__user-panel" data-is-playlist="'.concat(e,'"  data-js-id="').concat(t.id,'" data-js-url="').concat(t.play_url,'" data-js-artist-name="').concat(t.artist_title,'" data-js-song-title="').concat(t.full_title,'" data-js-image="').concat(i,'">\n                        <div class="track__imageWrapper" data-song-id="').concat(t.id,'">\n                          <img alt="\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c" class="track__image" height="48" width="48" src="').concat(i,'">\n                          <div class="play-btn track__image_play " href="').concat(t.play_url,'" data-song-id="').concat(t.id,'"></div>\n                        </div>\n                        \n                        <div class="track__content">\n                          <a class="track__title js-track-title )" href="/music/').concat(t.id,'">').concat(t.artist_title,"  - ").concat(t.full_title,'</a>\n                        </div>                      \n                        <div class="track__btnWrapper">                       \n                         <div class="add-favorites-btn track__btn js-favorite" data-favorite="0" data-song-id="').concat(t.id,'">\n                            <button class="icon-btn" type="button">\n                              <svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="https://www.w3.org/2000/svg">\n                                <path class="track__icon track__icon_favorite" d="M16.5706 21.6187C17.7924 22.261 18.9716 21.4055 18.738 20.0439L17.8623 14.9379C17.8708 14.9876 21.5592 11.3612 21.5592 11.3612C22.5477 10.3976 22.0985 9.01185 20.7313 8.81319L15.6046 8.06823C15.6544 8.07548 13.3453 3.44697 13.3453 3.44697C12.7344 2.20906 11.2776 2.20812 10.6662 3.44697L8.37348 8.09256C8.39578 8.04739 3.28026 8.81319 3.28026 8.81319C1.91414 9.0117 1.46308 10.3969 2.45236 11.3612L6.16209 14.9773C6.12602 14.9421 5.27355 20.0439 5.27355 20.0439C5.04019 21.4045 6.21819 22.2615 7.441 21.6187L12.0265 19.2079C11.9819 19.2314 16.5706 21.6187 16.5706 21.6187Z" fill-rule="evenodd" stroke-linecap="miter" stroke-width="2"></path>\n                              </svg>\n                            </button>\n                          </div>\n                          <button class="track__btn track__btn js-add-more-btn" type="button" data-song-id="').concat(t.id,'">\n                            <svg class="more" width="18" height="18" viewbox="0 0 18 18" xmlns="https://www.w3.org/2000/svg">\n                              <path class="track__icon track__icon_more" fill-rule="evenodd" clip-rule="evenodd" d="M10 0.999854C10 0.444946 9.55229 0 9 0C8.44386 0 8 0.44765 8 0.999854V8H0.999854C0.444946 8 0 8.44771 0 9C0 9.55614 0.44765 10 0.999854 10H8V17.0001C8 17.5551 8.44771 18 9 18C9.55614 18 10 17.5524 10 17.0001V10H17.0001C17.5551 10 18 9.55229 18 9C18 8.44386 17.5524 8 17.0001 8H10V0.999854Z"></path> \n                            </svg>                     \n                          </button>                       \n                        </div>\n                        \n                        <div class="jp_container hidden jp-state-no-volume">\n                          <div class="jp-progress">\n                            <div class="jp-seek-bar" style="width: 0%;">\n                              <div class="jp-play-bar" style="width: 0%;"></div>\n                            </div>\n                          </div>\n                        </div>                      \n                        </div>');return n.insertAdjacentHTML("afterbegin",a),n}}],(n=null)&&i(e.prototype,n),a&&i(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}()},,function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},,function(t,e,n){var r,o;(function(){(function(){(function(){this.Turbolinks={supported:null!=window.history.pushState&&null!=window.requestAnimationFrame&&null!=window.addEventListener,visit:function(t,e){return i.controller.visit(t,e)},clearCache:function(){return i.controller.clearCache()},setProgressBarDelay:function(t){return i.controller.setProgressBarDelay(t)}}}).call(this)}).call(this);var i=this.Turbolinks;(function(){(function(){var t,e,n,r=[].slice;i.copyObject=function(t){var e,n,r;for(e in n={},t)r=t[e],n[e]=r;return n},i.closest=function(e,n){return t.call(e,n)},t=function(){var t;return null!=(t=document.documentElement.closest)?t:function(t){var n;for(n=this;n;){if(n.nodeType===Node.ELEMENT_NODE&&e.call(n,t))return n;n=n.parentNode}}}(),i.defer=function(t){return setTimeout(t,1)},i.throttle=function(t){var e;return e=null,function(){var n;return n=1<=arguments.length?r.call(arguments,0):[],null!=e?e:e=requestAnimationFrame(function(r){return function(){return e=null,t.apply(r,n)}}(this))}},i.dispatch=function(t,e){var r,o,i,a,s,c;return c=(s=null!=e?e:{}).target,r=s.cancelable,o=s.data,(i=document.createEvent("Events")).initEvent(t,!0,!0===r),i.data=null!=o?o:{},i.cancelable&&!n&&(a=i.preventDefault,i.preventDefault=function(){return this.defaultPrevented||Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),a.call(this)}),(null!=c?c:document).dispatchEvent(i),i},n=function(){var t;return(t=document.createEvent("Events")).initEvent("test",!0,!0),t.preventDefault(),t.defaultPrevented}(),i.match=function(t,n){return e.call(t,n)},e=function(){var t,e,n,r;return null!=(e=null!=(n=null!=(r=(t=document.documentElement).matchesSelector)?r:t.webkitMatchesSelector)?n:t.msMatchesSelector)?e:t.mozMatchesSelector}(),i.uuid=function(){var t,e,n;for(n="",t=e=1;36>=e;t=++e)n+=9===t||14===t||19===t||24===t?"-":15===t?"4":20===t?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16);return n}}).call(this),function(){i.Location=function(){function t(t){var e,n;null==t&&(t=""),(n=document.createElement("a")).href=t.toString(),this.absoluteURL=n.href,2>(e=n.hash.length)?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-e),this.anchor=n.hash.slice(1))}var e,n,r,o;return t.wrap=function(t){return t instanceof this?t:new this(t)},t.prototype.getOrigin=function(){return this.absoluteURL.split("/",3).join("/")},t.prototype.getPath=function(){var t,e;return null!=(t=null!=(e=this.requestURL.match(/\/\/[^\/]*(\/[^?;]*)/))?e[1]:void 0)?t:"/"},t.prototype.getPathComponents=function(){return this.getPath().split("/").slice(1)},t.prototype.getLastPathComponent=function(){return this.getPathComponents().slice(-1)[0]},t.prototype.getExtension=function(){var t,e;return null!=(t=null!=(e=this.getLastPathComponent().match(/\.[^.]*$/))?e[0]:void 0)?t:""},t.prototype.isHTML=function(){return this.getExtension().match(/^(?:|\.(?:htm|html|xhtml))$/)},t.prototype.isPrefixedBy=function(t){var e;return e=n(t),this.isEqualTo(t)||o(this.absoluteURL,e)},t.prototype.isEqualTo=function(t){return this.absoluteURL===(null!=t?t.absoluteURL:void 0)},t.prototype.toCacheKey=function(){return this.requestURL},t.prototype.toJSON=function(){return this.absoluteURL},t.prototype.toString=function(){return this.absoluteURL},t.prototype.valueOf=function(){return this.absoluteURL},n=function(t){return e(t.getOrigin()+t.getPath())},e=function(t){return r(t,"/")?t:t+"/"},o=function(t,e){return t.slice(0,e.length)===e},r=function(t,e){return t.slice(-e.length)===e},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};i.HttpRequest=function(){function e(e,n,r){this.delegate=e,this.requestCanceled=t(this.requestCanceled,this),this.requestTimedOut=t(this.requestTimedOut,this),this.requestFailed=t(this.requestFailed,this),this.requestLoaded=t(this.requestLoaded,this),this.requestProgressed=t(this.requestProgressed,this),this.url=i.Location.wrap(n).requestURL,this.referrer=i.Location.wrap(r).absoluteURL,this.createXHR()}return e.NETWORK_FAILURE=0,e.TIMEOUT_FAILURE=-1,e.timeout=60,e.prototype.send=function(){var t;return this.xhr&&!this.sent?(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(),this.sent=!0,"function"==typeof(t=this.delegate).requestStarted?t.requestStarted():void 0):void 0},e.prototype.cancel=function(){return this.xhr&&this.sent?this.xhr.abort():void 0},e.prototype.requestProgressed=function(t){return t.lengthComputable?this.setProgress(t.loaded/t.total):void 0},e.prototype.requestLoaded=function(){return this.endRequest(function(t){return function(){var e;return 200<=(e=t.xhr.status)&&300>e?t.delegate.requestCompletedWithResponse(t.xhr.responseText,t.xhr.getResponseHeader("Turbolinks-Location")):(t.failed=!0,t.delegate.requestFailedWithStatusCode(t.xhr.status,t.xhr.responseText))}}(this))},e.prototype.requestFailed=function(){return this.endRequest(function(t){return function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.NETWORK_FAILURE)}}(this))},e.prototype.requestTimedOut=function(){return this.endRequest(function(t){return function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.TIMEOUT_FAILURE)}}(this))},e.prototype.requestCanceled=function(){return this.endRequest()},e.prototype.notifyApplicationBeforeRequestStart=function(){return i.dispatch("turbolinks:request-start",{data:{url:this.url,xhr:this.xhr}})},e.prototype.notifyApplicationAfterRequestEnd=function(){return i.dispatch("turbolinks:request-end",{data:{url:this.url,xhr:this.xhr}})},e.prototype.createXHR=function(){return this.xhr=new XMLHttpRequest,this.xhr.open("GET",this.url,!0),this.xhr.timeout=1e3*this.constructor.timeout,this.xhr.setRequestHeader("Accept","text/html, application/xhtml+xml"),this.xhr.setRequestHeader("Turbolinks-Referrer",this.referrer),this.xhr.onprogress=this.requestProgressed,this.xhr.onload=this.requestLoaded,this.xhr.onerror=this.requestFailed,this.xhr.ontimeout=this.requestTimedOut,this.xhr.onabort=this.requestCanceled},e.prototype.endRequest=function(t){return this.xhr?(this.notifyApplicationAfterRequestEnd(),null!=t&&t.call(this),this.destroy()):void 0},e.prototype.setProgress=function(t){var e;return this.progress=t,"function"==typeof(e=this.delegate).requestProgressed?e.requestProgressed(this.progress):void 0},e.prototype.destroy=function(){var t;return this.setProgress(1),"function"==typeof(t=this.delegate).requestFinished&&t.requestFinished(),this.delegate=null,this.xhr=null},e}()}.call(this),function(){i.ProgressBar=function(){function t(){this.trickle=function(t,e){return function(){return t.apply(e,arguments)}}(this.trickle,this),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement()}var e;return e=300,t.defaultCSS=".turbolinks-progress-bar {\n  position: fixed;\n  display: block;\n  top: 0;\n  left: 0;\n  height: 3px;\n  background: #0076ff;\n  z-index: 9999;\n  transition: width 300ms ease-out, opacity 150ms 150ms ease-in;\n  transform: translate3d(0, 0, 0);\n}",t.prototype.show=function(){return this.visible?void 0:(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())},t.prototype.hide=function(){return this.visible&&!this.hiding?(this.hiding=!0,this.fadeProgressElement(function(t){return function(){return t.uninstallProgressElement(),t.stopTrickling(),t.visible=!1,t.hiding=!1}}(this))):void 0},t.prototype.setValue=function(t){return this.value=t,this.refresh()},t.prototype.installStylesheetElement=function(){return document.head.insertBefore(this.stylesheetElement,document.head.firstChild)},t.prototype.installProgressElement=function(){return this.progressElement.style.width=0,this.progressElement.style.opacity=1,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()},t.prototype.fadeProgressElement=function(t){return this.progressElement.style.opacity=0,setTimeout(t,450)},t.prototype.uninstallProgressElement=function(){return this.progressElement.parentNode?document.documentElement.removeChild(this.progressElement):void 0},t.prototype.startTrickling=function(){return null!=this.trickleInterval?this.trickleInterval:this.trickleInterval=setInterval(this.trickle,e)},t.prototype.stopTrickling=function(){return clearInterval(this.trickleInterval),this.trickleInterval=null},t.prototype.trickle=function(){return this.setValue(this.value+Math.random()/100)},t.prototype.refresh=function(){return requestAnimationFrame(function(t){return function(){return t.progressElement.style.width=10+90*t.value+"%"}}(this))},t.prototype.createStylesheetElement=function(){var t;return(t=document.createElement("style")).type="text/css",t.textContent=this.constructor.defaultCSS,t},t.prototype.createProgressElement=function(){var t;return(t=document.createElement("div")).className="turbolinks-progress-bar",t},t}()}.call(this),function(){i.BrowserAdapter=function(){function t(t){this.controller=t,this.showProgressBar=function(t,e){return function(){return t.apply(e,arguments)}}(this.showProgressBar,this),this.progressBar=new i.ProgressBar}var e,n,r;return r=i.HttpRequest,e=r.NETWORK_FAILURE,n=r.TIMEOUT_FAILURE,t.prototype.visitProposedToLocationWithAction=function(t,e){return this.controller.startVisitToLocationWithAction(t,e)},t.prototype.visitStarted=function(t){return t.issueRequest(),t.changeHistory(),t.loadCachedSnapshot()},t.prototype.visitRequestStarted=function(t){return this.progressBar.setValue(0),t.hasCachedSnapshot()||"restore"!==t.action?this.showProgressBarAfterDelay():this.showProgressBar()},t.prototype.visitRequestProgressed=function(t){return this.progressBar.setValue(t.progress)},t.prototype.visitRequestCompleted=function(t){return t.loadResponse()},t.prototype.visitRequestFailedWithStatusCode=function(t,r){switch(r){case e:case n:return this.reload();default:return t.loadResponse()}},t.prototype.visitRequestFinished=function(t){return this.hideProgressBar()},t.prototype.visitCompleted=function(t){return t.followRedirect()},t.prototype.pageInvalidated=function(){return this.reload()},t.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=setTimeout(this.showProgressBar,this.controller.progressBarDelay)},t.prototype.showProgressBar=function(){return this.progressBar.show()},t.prototype.hideProgressBar=function(){return this.progressBar.hide(),clearTimeout(this.progressBarTimeout)},t.prototype.reload=function(){return window.location.reload()},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};i.History=function(){function e(e){this.delegate=e,this.onPageLoad=t(this.onPageLoad,this),this.onPopState=t(this.onPopState,this)}return e.prototype.start=function(){return this.started?void 0:(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0)},e.prototype.stop=function(){return this.started?(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1):void 0},e.prototype.push=function(t,e){return t=i.Location.wrap(t),this.update("push",t,e)},e.prototype.replace=function(t,e){return t=i.Location.wrap(t),this.update("replace",t,e)},e.prototype.onPopState=function(t){var e,n,r,o;return this.shouldHandlePopState()&&(o=null!=(n=t.state)?n.turbolinks:void 0)?(e=i.Location.wrap(window.location),r=o.restorationIdentifier,this.delegate.historyPoppedToLocationWithRestorationIdentifier(e,r)):void 0},e.prototype.onPageLoad=function(t){return i.defer(function(t){return function(){return t.pageLoaded=!0}}(this))},e.prototype.shouldHandlePopState=function(){return this.pageIsLoaded()},e.prototype.pageIsLoaded=function(){return this.pageLoaded||"complete"===document.readyState},e.prototype.update=function(t,e,n){var r;return r={turbolinks:{restorationIdentifier:n}},history[t+"State"](r,null,e)},e}()}.call(this),function(){i.HeadDetails=function(){function t(t){var e,n,r,a,s;for(this.elements={},n=0,a=t.length;a>n;n++)(s=t[n]).nodeType===Node.ELEMENT_NODE&&(r=s.outerHTML,(null!=(e=this.elements)[r]?e[r]:e[r]={type:i(s),tracked:o(s),elements:[]}).elements.push(s))}var e,n,r,o,i;return t.fromHeadElement=function(t){var e;return new this(null!=(e=null!=t?t.childNodes:void 0)?e:[])},t.prototype.hasElementWithKey=function(t){return t in this.elements},t.prototype.getTrackedElementSignature=function(){var t;return function(){var e,n;for(t in n=[],e=this.elements)e[t].tracked&&n.push(t);return n}.call(this).join("")},t.prototype.getScriptElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails("script",t)},t.prototype.getStylesheetElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails("stylesheet",t)},t.prototype.getElementsMatchingTypeNotInDetails=function(t,e){var n,r,o,i,a,s;for(r in a=[],o=this.elements)s=(i=o[r]).type,n=i.elements,s!==t||e.hasElementWithKey(r)||a.push(n[0]);return a},t.prototype.getProvisionalElements=function(){var t,e,n,r,o,i,a;for(e in n=[],r=this.elements)a=(o=r[e]).type,i=o.tracked,t=o.elements,null!=a||i?t.length>1&&n.push.apply(n,t.slice(1)):n.push.apply(n,t);return n},t.prototype.getMetaValue=function(t){var e;return null!=(e=this.findMetaElementByName(t))?e.getAttribute("content"):void 0},t.prototype.findMetaElementByName=function(t){var n,r,o,i;for(o in n=void 0,i=this.elements)r=i[o].elements,e(r[0],t)&&(n=r[0]);return n},i=function(t){return n(t)?"script":r(t)?"stylesheet":void 0},o=function(t){return"reload"===t.getAttribute("data-turbolinks-track")},n=function(t){return"script"===t.tagName.toLowerCase()},r=function(t){var e;return"style"===(e=t.tagName.toLowerCase())||"link"===e&&"stylesheet"===t.getAttribute("rel")},e=function(t,e){return"meta"===t.tagName.toLowerCase()&&t.getAttribute("name")===e},t}()}.call(this),function(){i.Snapshot=function(){function t(t,e){this.headDetails=t,this.bodyElement=e}return t.wrap=function(t){return t instanceof this?t:"string"==typeof t?this.fromHTMLString(t):this.fromHTMLElement(t)},t.fromHTMLString=function(t){var e;return(e=document.createElement("html")).innerHTML=t,this.fromHTMLElement(e)},t.fromHTMLElement=function(t){var e,n,r;return n=t.querySelector("head"),e=null!=(r=t.querySelector("body"))?r:document.createElement("body"),new this(i.HeadDetails.fromHeadElement(n),e)},t.prototype.clone=function(){return new this.constructor(this.headDetails,this.bodyElement.cloneNode(!0))},t.prototype.getRootLocation=function(){var t,e;return e=null!=(t=this.getSetting("root"))?t:"/",new i.Location(e)},t.prototype.getCacheControlValue=function(){return this.getSetting("cache-control")},t.prototype.getElementForAnchor=function(t){try{return this.bodyElement.querySelector("[id='"+t+"'], a[name='"+t+"']")}catch(i){}},t.prototype.getPermanentElements=function(){return this.bodyElement.querySelectorAll("[id][data-turbolinks-permanent]")},t.prototype.getPermanentElementById=function(t){return this.bodyElement.querySelector("#"+t+"[data-turbolinks-permanent]")},t.prototype.getPermanentElementsPresentInSnapshot=function(t){var e,n,r,o,i;for(i=[],n=0,r=(o=this.getPermanentElements()).length;r>n;n++)e=o[n],t.getPermanentElementById(e.id)&&i.push(e);return i},t.prototype.findFirstAutofocusableElement=function(){return this.bodyElement.querySelector("[autofocus]")},t.prototype.hasAnchor=function(t){return null!=this.getElementForAnchor(t)},t.prototype.isPreviewable=function(){return"no-preview"!==this.getCacheControlValue()},t.prototype.isCacheable=function(){return"no-cache"!==this.getCacheControlValue()},t.prototype.isVisitable=function(){return"reload"!==this.getSetting("visit-control")},t.prototype.getSetting=function(t){return this.headDetails.getMetaValue("turbolinks-"+t)},t}()}.call(this),function(){var t=[].slice;i.Renderer=function(){function e(){}var n;return e.render=function(){var e,n,r;return n=arguments[0],e=arguments[1],r=function(t,e,n){n.prototype=t.prototype;var r=new n,o=t.apply(r,e);return Object(o)===o?o:r}(this,3<=arguments.length?t.call(arguments,2):[],(function(){})),r.delegate=n,r.render(e),r},e.prototype.renderView=function(t){return this.delegate.viewWillRender(this.newBody),t(),this.delegate.viewRendered(this.newBody)},e.prototype.invalidateView=function(){return this.delegate.viewInvalidated()},e.prototype.createScriptElement=function(t){var e;return"false"===t.getAttribute("data-turbolinks-eval")?t:((e=document.createElement("script")).textContent=t.textContent,e.async=!1,n(e,t),e)},n=function(t,e){var n,r,o,i,a,s,c;for(s=[],n=0,r=(i=e.attributes).length;r>n;n++)o=(a=i[n]).name,c=a.value,s.push(t.setAttribute(o,c));return s},e}()}.call(this),function(){var t,e,n=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i.SnapshotRenderer=function(r){function o(t,e,n){this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=n,this.currentHeadDetails=this.currentSnapshot.headDetails,this.newHeadDetails=this.newSnapshot.headDetails,this.currentBody=this.currentSnapshot.bodyElement,this.newBody=this.newSnapshot.bodyElement}return n(o,r),o.prototype.render=function(t){return this.shouldRender()?(this.mergeHead(),this.renderView(function(e){return function(){return e.replaceBody(),e.isPreview||e.focusFirstAutofocusableElement(),t()}}(this))):this.invalidateView()},o.prototype.mergeHead=function(){return this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()},o.prototype.replaceBody=function(){var t;return t=this.relocateCurrentBodyPermanentElements(),this.activateNewBodyScriptElements(),this.assignNewBody(),this.replacePlaceholderElementsWithClonedPermanentElements(t)},o.prototype.shouldRender=function(){return this.newSnapshot.isVisitable()&&this.trackedElementsAreIdentical()},o.prototype.trackedElementsAreIdentical=function(){return this.currentHeadDetails.getTrackedElementSignature()===this.newHeadDetails.getTrackedElementSignature()},o.prototype.copyNewHeadStylesheetElements=function(){var t,e,n,r,o;for(o=[],e=0,n=(r=this.getNewHeadStylesheetElements()).length;n>e;e++)t=r[e],o.push(document.head.appendChild(t));return o},o.prototype.copyNewHeadScriptElements=function(){var t,e,n,r,o;for(o=[],e=0,n=(r=this.getNewHeadScriptElements()).length;n>e;e++)t=r[e],o.push(document.head.appendChild(this.createScriptElement(t)));return o},o.prototype.removeCurrentHeadProvisionalElements=function(){var t,e,n,r,o;for(o=[],e=0,n=(r=this.getCurrentHeadProvisionalElements()).length;n>e;e++)t=r[e],o.push(document.head.removeChild(t));return o},o.prototype.copyNewHeadProvisionalElements=function(){var t,e,n,r,o;for(o=[],e=0,n=(r=this.getNewHeadProvisionalElements()).length;n>e;e++)t=r[e],o.push(document.head.appendChild(t));return o},o.prototype.relocateCurrentBodyPermanentElements=function(){var n,r,o,i,a,s,c;for(c=[],n=0,r=(s=this.getCurrentBodyPermanentElements()).length;r>n;n++)i=s[n],a=t(i),o=this.newSnapshot.getPermanentElementById(i.id),e(i,a.element),e(o,i),c.push(a);return c},o.prototype.replacePlaceholderElementsWithClonedPermanentElements=function(t){var n,r,o,i,a,s;for(s=[],o=0,i=t.length;i>o;o++)r=(a=t[o]).element,n=a.permanentElement.cloneNode(!0),s.push(e(r,n));return s},o.prototype.activateNewBodyScriptElements=function(){var t,n,r,o,i,a;for(a=[],n=0,o=(i=this.getNewBodyScriptElements()).length;o>n;n++)r=i[n],t=this.createScriptElement(r),a.push(e(r,t));return a},o.prototype.assignNewBody=function(){return document.body=this.newBody},o.prototype.focusFirstAutofocusableElement=function(){var t;return null!=(t=this.newSnapshot.findFirstAutofocusableElement())?t.focus():void 0},o.prototype.getNewHeadStylesheetElements=function(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)},o.prototype.getNewHeadScriptElements=function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)},o.prototype.getCurrentHeadProvisionalElements=function(){return this.currentHeadDetails.getProvisionalElements()},o.prototype.getNewHeadProvisionalElements=function(){return this.newHeadDetails.getProvisionalElements()},o.prototype.getCurrentBodyPermanentElements=function(){return this.currentSnapshot.getPermanentElementsPresentInSnapshot(this.newSnapshot)},o.prototype.getNewBodyScriptElements=function(){return this.newBody.querySelectorAll("script")},o}(i.Renderer),t=function(t){var e;return(e=document.createElement("meta")).setAttribute("name","turbolinks-permanent-placeholder"),e.setAttribute("content",t.id),{element:e,permanentElement:t}},e=function(t,e){var n;return(n=t.parentNode)?n.replaceChild(e,t):void 0}}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;i.ErrorRenderer=function(e){function n(t){var e;(e=document.createElement("html")).innerHTML=t,this.newHead=e.querySelector("head"),this.newBody=e.querySelector("body")}return t(n,e),n.prototype.render=function(t){return this.renderView(function(e){return function(){return e.replaceHeadAndBody(),e.activateBodyScriptElements(),t()}}(this))},n.prototype.replaceHeadAndBody=function(){var t,e;return e=document.head,t=document.body,e.parentNode.replaceChild(this.newHead,e),t.parentNode.replaceChild(this.newBody,t)},n.prototype.activateBodyScriptElements=function(){var t,e,n,r,o,i;for(i=[],e=0,n=(r=this.getScriptElements()).length;n>e;e++)o=r[e],t=this.createScriptElement(o),i.push(o.parentNode.replaceChild(t,o));return i},n.prototype.getScriptElements=function(){return document.documentElement.querySelectorAll("script")},n}(i.Renderer)}.call(this),function(){i.View=function(){function t(t){this.delegate=t,this.htmlElement=document.documentElement}return t.prototype.getRootLocation=function(){return this.getSnapshot().getRootLocation()},t.prototype.getElementForAnchor=function(t){return this.getSnapshot().getElementForAnchor(t)},t.prototype.getSnapshot=function(){return i.Snapshot.fromHTMLElement(this.htmlElement)},t.prototype.render=function(t,e){var n,r,o;return o=t.snapshot,n=t.error,r=t.isPreview,this.markAsPreview(r),null!=o?this.renderSnapshot(o,r,e):this.renderError(n,e)},t.prototype.markAsPreview=function(t){return t?this.htmlElement.setAttribute("data-turbolinks-preview",""):this.htmlElement.removeAttribute("data-turbolinks-preview")},t.prototype.renderSnapshot=function(t,e,n){return i.SnapshotRenderer.render(this.delegate,n,this.getSnapshot(),i.Snapshot.wrap(t),e)},t.prototype.renderError=function(t,e){return i.ErrorRenderer.render(this.delegate,e,t)},t}()}.call(this),function(){i.ScrollManager=function(){function t(t){this.delegate=t,this.onScroll=function(t,e){return function(){return t.apply(e,arguments)}}(this.onScroll,this),this.onScroll=i.throttle(this.onScroll)}return t.prototype.start=function(){return this.started?void 0:(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)},t.prototype.stop=function(){return this.started?(removeEventListener("scroll",this.onScroll,!1),this.started=!1):void 0},t.prototype.scrollToElement=function(t){return t.scrollIntoView()},t.prototype.scrollToPosition=function(t){var e,n;return e=t.x,n=t.y,window.scrollTo(e,n)},t.prototype.onScroll=function(t){return this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},t.prototype.updatePosition=function(t){var e;return this.position=t,null!=(e=this.delegate)?e.scrollPositionChanged(this.position):void 0},t}()}.call(this),function(){i.SnapshotCache=function(){function t(t){this.size=t,this.keys=[],this.snapshots={}}var e;return t.prototype.has=function(t){return e(t)in this.snapshots},t.prototype.get=function(t){var e;if(this.has(t))return e=this.read(t),this.touch(t),e},t.prototype.put=function(t,e){return this.write(t,e),this.touch(t),e},t.prototype.read=function(t){var n;return n=e(t),this.snapshots[n]},t.prototype.write=function(t,n){var r;return r=e(t),this.snapshots[r]=n},t.prototype.touch=function(t){var n,r;return r=e(t),(n=this.keys.indexOf(r))>-1&&this.keys.splice(n,1),this.keys.unshift(r),this.trim()},t.prototype.trim=function(){var t,e,n,r,o;for(o=[],t=0,n=(r=this.keys.splice(this.size)).length;n>t;t++)e=r[t],o.push(delete this.snapshots[e]);return o},e=function(t){return i.Location.wrap(t).toCacheKey()},t}()}.call(this),function(){i.Visit=function(){function t(t,e,n){this.controller=t,this.action=n,this.performScroll=function(t,e){return function(){return t.apply(e,arguments)}}(this.performScroll,this),this.identifier=i.uuid(),this.location=i.Location.wrap(e),this.adapter=this.controller.adapter,this.state="initialized",this.timingMetrics={}}var e;return t.prototype.start=function(){return"initialized"===this.state?(this.recordTimingMetric("visitStart"),this.state="started",this.adapter.visitStarted(this)):void 0},t.prototype.cancel=function(){var t;return"started"===this.state?(null!=(t=this.request)&&t.cancel(),this.cancelRender(),this.state="canceled"):void 0},t.prototype.complete=function(){var t;return"started"===this.state?(this.recordTimingMetric("visitEnd"),this.state="completed","function"==typeof(t=this.adapter).visitCompleted&&t.visitCompleted(this),this.controller.visitCompleted(this)):void 0},t.prototype.fail=function(){var t;return"started"===this.state?(this.state="failed","function"==typeof(t=this.adapter).visitFailed?t.visitFailed(this):void 0):void 0},t.prototype.changeHistory=function(){var t,n;return this.historyChanged?void 0:(t=this.location.isEqualTo(this.referrer)?"replace":this.action,n=e(t),this.controller[n](this.location,this.restorationIdentifier),this.historyChanged=!0)},t.prototype.issueRequest=function(){return this.shouldIssueRequest()&&null==this.request?(this.progress=0,this.request=new i.HttpRequest(this,this.location,this.referrer),this.request.send()):void 0},t.prototype.getCachedSnapshot=function(){var t;return!(t=this.controller.getCachedSnapshotForLocation(this.location))||null!=this.location.anchor&&!t.hasAnchor(this.location.anchor)||"restore"!==this.action&&!t.isPreviewable()?void 0:t},t.prototype.hasCachedSnapshot=function(){return null!=this.getCachedSnapshot()},t.prototype.loadCachedSnapshot=function(){var t,e;return(e=this.getCachedSnapshot())?(t=this.shouldIssueRequest(),this.render((function(){var n;return this.cacheSnapshot(),this.controller.render({snapshot:e,isPreview:t},this.performScroll),"function"==typeof(n=this.adapter).visitRendered&&n.visitRendered(this),t?void 0:this.complete()}))):void 0},t.prototype.loadResponse=function(){return null!=this.response?this.render((function(){var t,e;return this.cacheSnapshot(),this.request.failed?(this.controller.render({error:this.response},this.performScroll),"function"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),this.fail()):(this.controller.render({snapshot:this.response},this.performScroll),"function"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),this.complete())})):void 0},t.prototype.followRedirect=function(){return this.redirectedToLocation&&!this.followedRedirect?(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0):void 0},t.prototype.requestStarted=function(){var t;return this.recordTimingMetric("requestStart"),"function"==typeof(t=this.adapter).visitRequestStarted?t.visitRequestStarted(this):void 0},t.prototype.requestProgressed=function(t){var e;return this.progress=t,"function"==typeof(e=this.adapter).visitRequestProgressed?e.visitRequestProgressed(this):void 0},t.prototype.requestCompletedWithResponse=function(t,e){return this.response=t,null!=e&&(this.redirectedToLocation=i.Location.wrap(e)),this.adapter.visitRequestCompleted(this)},t.prototype.requestFailedWithStatusCode=function(t,e){return this.response=e,this.adapter.visitRequestFailedWithStatusCode(this,t)},t.prototype.requestFinished=function(){var t;return this.recordTimingMetric("requestEnd"),"function"==typeof(t=this.adapter).visitRequestFinished?t.visitRequestFinished(this):void 0},t.prototype.performScroll=function(){return this.scrolled?void 0:("restore"===this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},t.prototype.scrollToRestoredPosition=function(){var t,e;return null!=(t=null!=(e=this.restorationData)?e.scrollPosition:void 0)?(this.controller.scrollToPosition(t),!0):void 0},t.prototype.scrollToAnchor=function(){return null!=this.location.anchor?(this.controller.scrollToAnchor(this.location.anchor),!0):void 0},t.prototype.scrollToTop=function(){return this.controller.scrollToPosition({x:0,y:0})},t.prototype.recordTimingMetric=function(t){var e;return null!=(e=this.timingMetrics)[t]?e[t]:e[t]=(new Date).getTime()},t.prototype.getTimingMetrics=function(){return i.copyObject(this.timingMetrics)},e=function(t){switch(t){case"replace":return"replaceHistoryWithLocationAndRestorationIdentifier";case"advance":case"restore":return"pushHistoryWithLocationAndRestorationIdentifier"}},t.prototype.shouldIssueRequest=function(){return"restore"!==this.action||!this.hasCachedSnapshot()},t.prototype.cacheSnapshot=function(){return this.snapshotCached?void 0:(this.controller.cacheSnapshot(),this.snapshotCached=!0)},t.prototype.render=function(t){return this.cancelRender(),this.frame=requestAnimationFrame(function(e){return function(){return e.frame=null,t.call(e)}}(this))},t.prototype.cancelRender=function(){return this.frame?cancelAnimationFrame(this.frame):void 0},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};i.Controller=function(){function e(){this.clickBubbled=t(this.clickBubbled,this),this.clickCaptured=t(this.clickCaptured,this),this.pageLoaded=t(this.pageLoaded,this),this.history=new i.History(this),this.view=new i.View(this),this.scrollManager=new i.ScrollManager(this),this.restorationData={},this.clearCache(),this.setProgressBarDelay(500)}return e.prototype.start=function(){return i.supported&&!this.started?(addEventListener("click",this.clickCaptured,!0),addEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=!0):void 0},e.prototype.disable=function(){return this.enabled=!1},e.prototype.stop=function(){return this.started?(removeEventListener("click",this.clickCaptured,!0),removeEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1):void 0},e.prototype.clearCache=function(){return this.cache=new i.SnapshotCache(10)},e.prototype.visit=function(t,e){var n,r;return null==e&&(e={}),t=i.Location.wrap(t),this.applicationAllowsVisitingLocation(t)?this.locationIsVisitable(t)?(n=null!=(r=e.action)?r:"advance",this.adapter.visitProposedToLocationWithAction(t,n)):window.location=t:void 0},e.prototype.startVisitToLocationWithAction=function(t,e,n){var r;return i.supported?(r=this.getRestorationDataForIdentifier(n),this.startVisit(t,e,{restorationData:r})):window.location=t},e.prototype.setProgressBarDelay=function(t){return this.progressBarDelay=t},e.prototype.startHistory=function(){return this.location=i.Location.wrap(window.location),this.restorationIdentifier=i.uuid(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)},e.prototype.stopHistory=function(){return this.history.stop()},e.prototype.pushHistoryWithLocationAndRestorationIdentifier=function(t,e){return this.restorationIdentifier=e,this.location=i.Location.wrap(t),this.history.push(this.location,this.restorationIdentifier)},e.prototype.replaceHistoryWithLocationAndRestorationIdentifier=function(t,e){return this.restorationIdentifier=e,this.location=i.Location.wrap(t),this.history.replace(this.location,this.restorationIdentifier)},e.prototype.historyPoppedToLocationWithRestorationIdentifier=function(t,e){var n;return this.restorationIdentifier=e,this.enabled?(n=this.getRestorationDataForIdentifier(this.restorationIdentifier),this.startVisit(t,"restore",{restorationIdentifier:this.restorationIdentifier,restorationData:n,historyChanged:!0}),this.location=i.Location.wrap(t)):this.adapter.pageInvalidated()},e.prototype.getCachedSnapshotForLocation=function(t){var e;return null!=(e=this.cache.get(t))?e.clone():void 0},e.prototype.shouldCacheSnapshot=function(){return this.view.getSnapshot().isCacheable()},e.prototype.cacheSnapshot=function(){var t,e;return this.shouldCacheSnapshot()?(this.notifyApplicationBeforeCachingSnapshot(),e=this.view.getSnapshot(),t=this.lastRenderedLocation,i.defer(function(n){return function(){return n.cache.put(t,e.clone())}}(this))):void 0},e.prototype.scrollToAnchor=function(t){var e;return(e=this.view.getElementForAnchor(t))?this.scrollToElement(e):this.scrollToPosition({x:0,y:0})},e.prototype.scrollToElement=function(t){return this.scrollManager.scrollToElement(t)},e.prototype.scrollToPosition=function(t){return this.scrollManager.scrollToPosition(t)},e.prototype.scrollPositionChanged=function(t){return this.getCurrentRestorationData().scrollPosition=t},e.prototype.render=function(t,e){return this.view.render(t,e)},e.prototype.viewInvalidated=function(){return this.adapter.pageInvalidated()},e.prototype.viewWillRender=function(t){return this.notifyApplicationBeforeRender(t)},e.prototype.viewRendered=function(){return this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()},e.prototype.pageLoaded=function(){return this.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()},e.prototype.clickCaptured=function(){return removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},e.prototype.clickBubbled=function(t){var e,n,r;return this.enabled&&this.clickEventIsSignificant(t)&&(n=this.getVisitableLinkForNode(t.target))&&(r=this.getVisitableLocationForLink(n))&&this.applicationAllowsFollowingLinkToLocation(n,r)?(t.preventDefault(),e=this.getActionForLink(n),this.visit(r,{action:e})):void 0},e.prototype.applicationAllowsFollowingLinkToLocation=function(t,e){return!this.notifyApplicationAfterClickingLinkToLocation(t,e).defaultPrevented},e.prototype.applicationAllowsVisitingLocation=function(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented},e.prototype.notifyApplicationAfterClickingLinkToLocation=function(t,e){return i.dispatch("turbolinks:click",{target:t,data:{url:e.absoluteURL},cancelable:!0})},e.prototype.notifyApplicationBeforeVisitingLocation=function(t){return i.dispatch("turbolinks:before-visit",{data:{url:t.absoluteURL},cancelable:!0})},e.prototype.notifyApplicationAfterVisitingLocation=function(t){return i.dispatch("turbolinks:visit",{data:{url:t.absoluteURL}})},e.prototype.notifyApplicationBeforeCachingSnapshot=function(){return i.dispatch("turbolinks:before-cache")},e.prototype.notifyApplicationBeforeRender=function(t){return i.dispatch("turbolinks:before-render",{data:{newBody:t}})},e.prototype.notifyApplicationAfterRender=function(){return i.dispatch("turbolinks:render")},e.prototype.notifyApplicationAfterPageLoad=function(t){return null==t&&(t={}),i.dispatch("turbolinks:load",{data:{url:this.location.absoluteURL,timing:t}})},e.prototype.startVisit=function(t,e,n){var r;return null!=(r=this.currentVisit)&&r.cancel(),this.currentVisit=this.createVisit(t,e,n),this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(t)},e.prototype.createVisit=function(t,e,n){var r,o,a,s,c;return s=(o=null!=n?n:{}).restorationIdentifier,a=o.restorationData,r=o.historyChanged,(c=new i.Visit(this,t,e)).restorationIdentifier=null!=s?s:i.uuid(),c.restorationData=i.copyObject(a),c.historyChanged=r,c.referrer=this.location,c},e.prototype.visitCompleted=function(t){return this.notifyApplicationAfterPageLoad(t.getTimingMetrics())},e.prototype.clickEventIsSignificant=function(t){return!(t.defaultPrevented||t.target.isContentEditable||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)},e.prototype.getVisitableLinkForNode=function(t){return this.nodeIsVisitable(t)?i.closest(t,"a[href]:not([target]):not([download])"):void 0},e.prototype.getVisitableLocationForLink=function(t){var e;return e=new i.Location(t.getAttribute("href")),this.locationIsVisitable(e)?e:void 0},e.prototype.getActionForLink=function(t){var e;return null!=(e=t.getAttribute("data-turbolinks-action"))?e:"advance"},e.prototype.nodeIsVisitable=function(t){var e;return!(e=i.closest(t,"[data-turbolinks]"))||"false"!==e.getAttribute("data-turbolinks")},e.prototype.locationIsVisitable=function(t){return t.isPrefixedBy(this.view.getRootLocation())&&t.isHTML()},e.prototype.getCurrentRestorationData=function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)},e.prototype.getRestorationDataForIdentifier=function(t){var e;return null!=(e=this.restorationData)[t]?e[t]:e[t]={}},e}()}.call(this),function(){!function(){var t,e;if((t=e=document.currentScript)&&!e.hasAttribute("data-turbolinks-suppress-warning"))for(;t=t.parentNode;)if(t===document.body)return console.warn("You are loading Turbolinks from a <script> element inside the <body> element. This is probably not what you meant to do!\n\nLoad your application\u2019s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\nFor more information, see: https://github.com/turbolinks/turbolinks#working-with-script-elements\n\n\u2014\u2014\nSuppress this warning by adding a `data-turbolinks-suppress-warning` attribute to: %s",e.outerHTML)}()}.call(this),function(){var t,e,n;i.start=function(){return e()?(null==i.controller&&(i.controller=t()),i.controller.start()):void 0},e=function(){return null==window.Turbolinks&&(window.Turbolinks=i),n()},t=function(){var t;return(t=new i.Controller).adapter=new i.BrowserAdapter(t),t},(n=function(){return window.Turbolinks===i})()&&i.start()}.call(this)}).call(this),t.exports?t.exports=i:void 0===(o="function"===typeof(r=i)?r.call(e,n,e,t):r)||(t.exports=o)}).call(this)},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",(function(){return S}));var o=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.audio=e,this.audio&&(this.volumeWrapper=document.querySelector(".player__volume-wrapper"),this.volumeNode=document.querySelector(".player__volume-scale"),this.volumeBtn=document.querySelector(".player__volume-btn"),this.getVolume(),this.volumeBtn.onclick=function(){n.volumeWrapper.classList.toggle("player__volume-wrapper_hide"),n.volumeWrapper.classList.toggle("player__volume-wrapper_show")},this.volumeNode.oninput=function(){n.audio.volume=n.volumeNode.value/100,localStorage.setItem("volume",n.audio.volume),n.checkVolume()})}var e,n,o;return e=t,(n=[{key:"getVolume",value:function(){var t=localStorage.getItem("volume");t?(this.volumeNode.value=100*t,this.audio.volume=t,this.checkVolume()):this.audio.volume=.5}},{key:"checkVolume",value:function(){0===this.audio.volume?this.volumeBtn.classList.add("player__volume-btn_mute"):this.volumeBtn.classList.remove("player__volume-btn_mute")}}])&&r(e.prototype,n),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}(),i=n(0),a=n(19);function s(){s=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(q){u=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new x(o||[]);return r(a,"_invoke",{value:_(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(q){return{type:"throw",arg:q}}}t.wrap=l;var h={};function p(){}function f(){}function y(){}var v={};u(v,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(T([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=y.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function o(r,i,a,s){var c=d(t[r],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=L(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=d(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function L(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=d(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return f.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:f,configurable:!0}),f.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(k.prototype),u(k.prototype,a,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=T,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function c(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,o)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(e){var n=this,r=(e.play,e.pause,e.switcher),o=e.changeTrack;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.navigator=navigator,navigator.mediaSession.setActionHandler("seekbackward",null),navigator.mediaSession.setActionHandler("seekforward",null),navigator.mediaSession.setActionHandler("previoustrack",(function(){o("prevTrack")})),navigator.mediaSession.setActionHandler("nexttrack",(function(){o("nextTrack")})),this.navigator.mediaSession.setActionHandler("play",(function(){r(),n.navigator.mediaSession.playbackState="playing"})),this.navigator.mediaSession.setActionHandler("pause",(function(){r(),n.navigator.mediaSession.playbackState="paused"}))}var e,n,r,o,l;return e=t,n=[{key:"setMetadata",value:function(t){this.navigator.mediaSession.metadata=t}},{key:"updateMetaData",value:(o=s().mark((function t(e,n){var r,o,i,c,u;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.split("\u2013",2),t.next=3,this.getSongData(n);case 3:o=t.sent,i={title:r[0],artist:r[1]?r[1].replace(" ",""):""},(c=Object(a.a)(o.image)).player_96&&(i.artwork=[{src:c.player_96,sizes:"96x96",type:"image/jpeg"},{src:c.player_128,sizes:"128x128",type:"image/jpeg"},{src:c.player_192,sizes:"192x192",type:"image/jpeg"},{src:c.player_256,sizes:"256x256",type:"image/jpeg"},{src:c.player_384,sizes:"384x384",type:"image/jpeg"},{src:c.player_512,sizes:"512x512",type:"image/jpeg"}]),u=new MediaMetadata(i),this.setMetadata(u);case 9:case"end":return t.stop()}}),t,this)})),l=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){c(i,n,r,a,s,"next",t)}function s(t){c(i,n,r,a,s,"throw",t)}a(void 0)}))},function(t,e){return l.apply(this,arguments)})},{key:"getSongData",value:function(t){var e=Object(i.a)("GET");return fetch("/api/v1/web/songs/".concat(t),e).then((function(t){if(t.ok)return t.json();throw"Bad responce"})).then((function(t){return t})).catch((function(t){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430",t),t}))}}],n&&u(e.prototype,n),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t,e){new MutationObserver(e).observe(t,{childList:!1,subtree:!1,attributes:!0,attributeFilter:["data-playing"]})}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(e){var n=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.audio=e,this.audio.crossOrigin="anonymous",this.duration=0,this.audio.dataset.aSongId&&(this.duration=this.audio.duration),this.progress=document.querySelector(".player__progress"),this.title=document.querySelector(".player__title"),this.timer=document.querySelector(".player__timer"),this.indicator=document.querySelector(".player__indicator"),this.button=document.querySelector("button.js-play-pause"),this.buttonNext=document.querySelector("button.player__controls.player__controls_next"),this.buttonPrev=document.querySelector("button.player__controls.player__controls_prev"),this.switchPlayPause=this.switchPlayPause.bind(this),this.changeTrack=this.changeTrack.bind(this),"mediaSession"in navigator){var r={play:this.continuePlaying.bind(this),pause:this.pause.bind(this),switcher:this.playPause.bind(this),changeTrack:this.changeTrack};this.mediaSessionPlayer=new l(r)}this.audio&&(this.button.onclick=this.playPause.bind(this),d(this.audio,this.switchPlayPause),this.audio.onended=function(){var t=new Event("nextTrack");n.audio.dispatchEvent(t)},this.buttonNext.onclick=function(){n.changeTrack("nextTrack")},this.buttonPrev.onclick=function(){n.changeTrack("prevTrack")},this.audio.ontimeupdate=this.renderProgressBar.bind(this),this.audio.oncanplay=this.canPlay.bind(this),this.audio.ondurationchange=this.getDuration.bind(this),this.progress.onclick=this.rewind.bind(this))}var e,n,r;return e=t,(n=[{key:"changeTrack",value:function(t){if("prevTrack"===t||"nextTrack"===t){var e=new Event(t);this.audio.dispatchEvent(e)}}},{key:"setData",value:function(t){var e=this,n=t.trackLink,r=t.id,o=t.title;if(this.setTitle(o),!n)throw new Error("bad song trackLink");this.indicator.style.width=0,this.audio.src=n;var i=window.navigator.userAgent.toLowerCase();/iphone|ipod|ipad/.test(i)&&(this.audio.load(),this.button.classList.add("player__controls_spinner"),this.audio.oncanplaythrough=function(){e.button.classList.remove("player__controls_spinner")}),document.querySelector(".player").classList.remove("player_hidden"),this.audio.dataset.aSongId=r,this.audio.dataset.playing=!0,this.progressWidth=this.progress.offsetWidth}},{key:"setCurrentTrack",value:function(t){this.currentTrack=t}},{key:"setTitle",value:function(t){this.title.innerHTML=t}},{key:"play",value:function(){this.audio.play(),this.audio.dataset.playing="true"}},{key:"pause",value:function(){this.audio.pause(),this.audio.dataset.playing="false"}},{key:"getDuration",value:function(){this.duration=this.audio.duration}},{key:"playPause",value:function(){var t=document.getElementById("zaycev_net");return t&&t.contentWindow.postMessage("zaycev_stop","*"),"true"===this.audio.dataset.playing?(this.audio.pause(),this.audio.dataset.playing="false"):(this.audio.play(),this.audio.dataset.playing="true"),this.audio.dataset.playing}},{key:"continuePlaying",value:function(){this.audio.play(),this.audio.dataset.playing="true"}},{key:"canPlay",value:function(){if("false"!==this.audio.dataset.playing){this.audio.play(),this.audio.dataset.playing="true",this.button.classList.add("player__controls_pause");var t=new CustomEvent("playerPlayPauseEvent",{detail:{playing:!0}});this.audio.dispatchEvent(t)}}},{key:"renderProgressBar",value:function(){this.formatTimer(this.audio.currentTime),this.indicator.style.width=this.calcProc()}},{key:"formatTimer",value:function(t){var e=Math.floor(t%60),n=Math.floor(t/60);e<=9&&(e="0"+e),n<=9&&(n="0"+n),this.timer.innerHTML=n+":"+e}},{key:"calcProc",value:function(){return 100*this.audio.currentTime/this.audio.duration+"%"}},{key:"rewind",value:function(t){if(0!==this.duration){var e=100*t.offsetX/t.currentTarget.clientWidth;this.progressWidth>t.currentTarget.clientWidth?this.indicator.style.width=t.offsetX*(this.progressWidth/t.currentTarget.clientWidth)+"px":this.indicator.style.width=t.offsetX+"px",this.setCurrentTime(e),"false"===this.audio.dataset.playing&&(this.audio.dataset.playing="true",this.button.classList.add("player__controls_pause"))}}},{key:"setCurrentTime",value:function(t){this.audio.currentTime=t*this.duration/100}},{key:"switchPlayPause",value:function(){"true"===this.audio.dataset.playing?this.button.classList.add("player__controls_pause"):this.button.classList.remove("player__controls_pause")}}])&&h(e.prototype,n),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),f=n(4),y=n(20),v=n(2),g=n(8),m=n(11);n(9);function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var w=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.audio=e,this.tracks=localStorage.getItem("playlist"),this.playlistBtn=document.querySelector("button.player__controls_playlist"),this.state={},this.favorite=new g.a,this.addListener=this.addListener.bind(this),this.searchNextTrack=this.searchNextTrack.bind(this),this.searchPrevTrack=this.searchPrevTrack.bind(this),this.playlistBtn.onclick=function(){n.isLocalstor()||n.updatePlaylist(),n.state.showing=!n.state.showing,n.overlay||n.renderOverlay(),document.querySelector("body").classList.toggle("body_fixed"),n.overlay.classList.toggle("overlay_visible"),n.state.showing&&n.state.currentTrack.scrollIntoView({behavior:"smooth",block:"start"})},this.tracks&&(this.tracks=JSON.parse(this.tracks),this.overlay="",this.state.showing=!1,d(this.audio,this.switchPlayPause.bind(this)))}var e,n,r;return e=t,(n=[{key:"isLocalstor",value:function(){return!!this.tracks[0].id}},{key:"updatePlaylist",value:function(){this.tracks=localStorage.getItem("playlist"),this.tracks=JSON.parse(this.tracks),this.overlay?(this.overlay_block.innerHTML="",this.overlay_block.append(this.renderPlaylist()),this.searchCurrentTrack()):this.renderOverlay()}},{key:"renderOverlay",value:function(){var t=this;this.overlay=Object(f.a)("DIV",["overlay"]),this.overlay_block=Object(f.a)("DIV",["overlay_block"]),this.overlay_block.append(this.renderPlaylist()),this.overlay.append(this.overlay_block),this.overlay.onclick=function(e){(e.target.classList.contains("overlay")||e.target.classList.contains("overlay_block"))&&(t.state.showing=!t.state.showing,document.querySelector("body").classList.toggle("body_fixed"),t.overlay.classList.toggle("overlay_visible"),t.state.showing&&t.state.currentTrack.scrollIntoView({behavior:"smooth",block:"start"}))},document.querySelector("body").append(this.overlay)}},{key:"renderPlaylist",value:function(){var t=this;return this.playlistNode=Object(f.a)("DIV",["playlist","playlist_player"]),this.tracks.forEach((function(e){var n=y.a.renderHTML(e,!0);n.onclick=t.addListener;var r=Object(v.a)(),o=n.querySelector(".js-favorite");1==e.favorite&&(o.dataset.favorite="1",o.querySelector("path").classList.add("track__icon_active")),0==r&&(n.querySelector(".js-add-more-btn").style.display="none"),e.id===t.audio.dataset.aSongId&&t.updateTrackData(n),t.playlistNode.append(n)})),this.playlistNode}},{key:"searchCurrentTrack",value:function(){var t=this,e=this.audio.dataset.aSongId,n=document.querySelector(".playlist_player");null!=n&&n.querySelectorAll(".song-item").forEach((function(n){n.dataset.aSongId==e&&(t.state.currentTrack=n,t.updateTrackData(n))}))}},{key:"updateTrackData",value:function(t){this.clearCurrentTrack(),this.state.currentTrack=t,this.button=this.state.currentTrack.querySelector(".play-btn"),this.trackLink=this.button.getAttribute("href"),this.title=this.state.currentTrack.querySelector(".js-track-title").innerText,this.id=this.state.currentTrack.dataset.aSongId.replace(/song-/,""),"true"===this.audio.dataset.playing?this.button.classList.add("play"):this.button.classList.remove("play")}},{key:"addListener",value:function(t){var e=t.target;if(e.classList.contains("play-btn")){var n=e.closest(".song-item");if(this.state.currentTrack===n){var r=new Event("playPause");this.audio.dispatchEvent(r)}else{this.updateTrackData(n);var o=new CustomEvent("playlistNewTrackClicked",{detail:this.prepareData(e)});this.audio.dispatchEvent(o)}}this.addFavoriteListener(t,e,this.favorite),this.addMoreListener(e)}},{key:"addFavoriteListener",value:function(t,e,n){if(e.classList.contains("js-favorite")||e.classList.contains("track__icon_favorite")){var r=e.closest(".js-favorite"),o=+r.dataset.songId,i=+r.dataset.favorite;0==Object(v.a)()?n.setFavoriteForGuest(o,i):n.setFavoriteForUser(t,o,i)}}},{key:"addMoreListener",value:function(t){if(t.classList.contains("js-add-more-btn")||t.classList.contains("more")||t.classList.contains("track__icon_more")){var e=(t.classList.contains("more")||t.classList.contains("track__icon_more")?t.closest(".js-add-more-btn"):t).dataset.songId;new m.a(e).addToPlayList()}}},{key:"prepareData",value:function(t){var e=t.getAttribute("href"),n=t.closest(".song-item");return{trackLink:e,id:n.dataset.aSongId.replace("song-",""),title:n.querySelector(".js-track-title").innerText}}},{key:"clearCurrentTrack",value:function(){this.state.currentTrack&&this.button.classList.remove("play")}},{key:"switchPlayPause",value:function(){"true"===this.audio.dataset.playing&&this.button?this.button.classList.add("play"):this.button&&this.button.classList.remove("play")}},{key:"searchNextTrack",value:function(){var t=this,e=this.audio.dataset.aSongId;this.overlay||this.renderOverlay(),this.tracks.forEach((function(n,r){if(n.id===e){var o;o=r+1<t.tracks.length?t.overlay.querySelector('.song-item[data-a-song-id="song-'.concat(t.tracks[r+1].id,'"]')):t.playlistNode.querySelector(".song-item"),t.updateTrackData(o);var i=new CustomEvent("playlistNewTrackClicked",{detail:{id:t.id,trackLink:t.trackLink,title:t.title}});t.audio.dispatchEvent(i)}}))}},{key:"searchPrevTrack",value:function(){var t=this,e=this.audio.dataset.aSongId;this.tracks.forEach((function(n,r){if(n.id===e){var o;o=r-1>=0?t.overlay.querySelector('.song-item[data-a-song-id="song-'.concat(t.tracks[r-1].id,'"]')):t.playlistNode.querySelector('.song-item[data-a-song-id="song-'.concat(t.tracks[t.tracks.length-1].id,'"]')),t.updateTrackData(o);var i=new CustomEvent("playlistNewTrackClicked",{detail:{id:t.id,trackLink:t.trackLink,title:t.title}});t.audio.dispatchEvent(i)}}))}}])&&b(e.prototype,n),r&&b(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.audio=e,this.trackList=document.querySelectorAll(".song-item"),this.trackList=this.clear(this.trackList),this.state={},this.switchPlayPause=this.switchPlayPause.bind(this),this.audio&&(this.audio.addEventListener("timeupdate",this.renderProgress.bind(this)),d(this.audio,this.switchPlayPause))}var e,n,r;return e=t,(n=[{key:"switchPlayPause",value:function(t){this.state.currentTrack||this.searchCurrentTrack(this.audio.dataset.aSongId),"true"===this.audio.dataset.playing&&this.button?this.button.classList.add("play"):this.button&&this.button.classList.remove("play")}},{key:"clear",value:function(t){var e=[];return t.forEach((function(t){t.closest(".playlist").classList.contains("playlist_player")||t.querySelector(".disabled")||e.push(t)})),e}},{key:"initPlayBtn",value:function(){var t=this;this.trackList.forEach((function(e){e.querySelector(".play-btn").onclick=t.playEvent.bind(t)}))}},{key:"prePlayEvent",value:function(t){var e=t.currentTarget.getAttribute("href"),n=t.currentTarget.dataset.songId,r=t.currentTarget.closest(".song-item").querySelector(".track__user-panel"),o="".concat(r.dataset.jsArtistName," - ").concat(r.dataset.jsSongTitle);return function(t,e){"function"===typeof ym&&"undefined"!==typeof gtag&&(ym(53320615,"reachGoal","click_play"),gtag("event","play",{event_category:"click",event_label:e})),"undefined"!==t&&fetch("/play/".concat(t)).then((function(){}))}(n,o),{trackLink:e,id:n,title:o}}},{key:"playEvent",value:function(t){var e=document.getElementById("zaycev_net");e&&e.contentWindow.postMessage("zaycev_stop","*");var n,r=t.currentTarget.closest(".song-item");if(this.state.currentTrack===r)this.state.playing=!this.state.playing,n=new CustomEvent("playPause");else{var o=this.searchPlaylist(r);o.length&&this.createJSON(o),this.newTrackClicked(r),n=new CustomEvent("pagePlayEvent",{detail:this.prePlayEvent(t)})}"function"==typeof createIframe&&createIframe(),this.audio.dispatchEvent(n)}},{key:"newTrackClicked",value:function(t){this.clearCurrentTrack(),this.state.playing=!0,this.button=t.querySelector(".play-btn"),this.button.classList.add("play"),this.setCurrentTrackNode(t),t.querySelector(".track__user-panel")?t.querySelector(".track__user-panel").appendChild(this.renderTrackProgress()):t.appendChild(this.renderTrackProgress())}},{key:"clearCurrentTrack",value:function(){this.button&&(this.button.classList.remove("play"),this.trackProgress.remove())}},{key:"setCurrentTrackNode",value:function(t){this.state.currentTrack=t}},{key:"rewindTrack",value:function(t){if(0!==this.audio.duration){var e=100*t.offsetX/t.currentTarget.clientWidth;this.trackProgressIndicator.style.width=e+"%",this.audio.currentTime=this.audio.duration*e/100}}},{key:"renderProgress",value:function(){this.trackProgressIndicator&&(this.trackProgressIndicator.style.width=this.calcProc())}},{key:"calcProc",value:function(){return 100*this.audio.currentTime/this.audio.duration+"%"}},{key:"searchPlaylist",value:function(t){var e=t.closest(".playlist");if(e){var n=e.querySelectorAll(".song-item");return this.clear(n)}}},{key:"searchCurrentTrack",value:function(t){var e=this;this.trackList.forEach((function(n,r){if(n.dataset.aSongId==="song-".concat(t))return e.updateCurrentTrack(n)}))}},{key:"updateCurrentTrack",value:function(t){this.clearCurrentTrack(),this.state.currentTrack=t,this.button=t.querySelector(".play-btn"),this.switchPlayPause(),t.querySelector(".track__user-panel").append(this.renderTrackProgress())}},{key:"createJSON",value:function(t){var e=[];t.forEach((function(t){var n=t.querySelector(".track__user-panel"),r=n.dataset.jsId,o=n.dataset.jsTitle,i=n.dataset.jsImage,a=n.dataset.jsArtistName,s=n.dataset.jsSongTitle,c=n.querySelector(".play-btn").getAttribute("href"),u=n.querySelector(".js-favorite").dataset.favorite;e.push({id:r,title:o,image:i,artist_title:a,full_title:s,play_url:c,favorite:u})})),localStorage.setItem("playlist",JSON.stringify(e))}},{key:"renderTrackProgress",value:function(){var t=document.createElement("div"),e=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");return t.classList.add("jp_container"),e.classList.add("jp-progress"),n.classList.add("jp-seek-bar"),r.classList.add("jp-play-bar"),this.trackProgress=t,this.trackProgressWrapper=e,this.trackProgressIndicator=r,this.trackProgressWrapper.onclick=this.rewindTrack.bind(this),n.append(r),e.append(n),t.append(e),t}}])&&k(e.prototype,n),r&&k(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var S=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.receivePagePlayEvent=this.receivePagePlayEvent.bind(this),this.receivePlaylistNewTrackClicked=this.receivePlaylistNewTrackClicked.bind(this),this.playPause=this.playPause.bind(this),this.nextTrack=this.nextTrack.bind(this),this.prevTrack=this.prevTrack.bind(this)}var e,n,r;return e=t,(n=[{key:"initialization",value:function(){if(this.audio=document.getElementById("audio"),this.state={},this.pagePlayer=new _(this.audio),this.player=new p(this.audio),this.volume=new o(this.audio),this.playlist=new w(this.audio),this.pagePlayer.initPlayBtn(),this.audio&&(this.audio.addEventListener("pagePlayEvent",this.receivePagePlayEvent),this.audio.addEventListener("playerPlayPauseEvent",this.receivePlayerPlayPauseEvent),this.audio.addEventListener("playlistNewTrackClicked",this.receivePlaylistNewTrackClicked),this.audio.addEventListener("playPause",this.playPause),this.audio.addEventListener("nextTrack",this.nextTrack),this.audio.addEventListener("prevTrack",this.prevTrack),this.audio.dataset.aSongId)){var t=this.audio.dataset.aSongId;this.pagePlayer.searchCurrentTrack(t)}}},{key:"nextTrack",value:function(){this.playlist.searchNextTrack()}},{key:"prevTrack",value:function(){this.playlist.searchPrevTrack()}},{key:"playPause",value:function(){"true"===this.audio.dataset.playing?this.player.pause():this.player.play()}},{key:"receivePagePlayEvent",value:function(t){this.player.setData(t.detail),this.playlist.updatePlaylist()}},{key:"receivePlaylistNewTrackClicked",value:function(t){this.pagePlayer.searchCurrentTrack(t.detail.id),this.player.setData(t.detail)}},{key:"pause",value:function(){this.audio.pause()}},{key:"continuePlaying",value:function(){this.audio.play()}},{key:"calcProc",value:function(){return this.state.rhs&&this.state.duration&&this.state.rhs.match("s")?100*this.audio.currentTime/30+"%":100*this.audio.currentTime/this.state.duration+"%"}},{key:"searchNextTrack",value:function(t){var e=this;this.trackList.forEach((function(n,r){n==t&&(e.trackList[r+1]?e.state.nextTrackNode=e.trackList[r+1]:e.state.nextTrackNode=e.trackList[0])}))}},{key:"searchPrevTrack",value:function(t){var e=this,n=this.trackList.length;this.trackList.forEach((function(r,o){r==t&&(e.state.prevTrackNode=o>0?e.trackList[o-1]:e.trackList[n-1])}))}},{key:"clearBtn",value:function(){var t=document.querySelectorAll(".jp_container"),e=document.querySelector(".play");e&&e.classList.remove("play"),t.forEach((function(t){t.remove()}))}},{key:"searchCurrentTrack",value:function(){if(document.getElementById("audio").dataset.aSongId){this.clearBtn(),this.state.duration=this.audio.duration;var t=document.querySelector("[data-a-song-id='".concat(document.getElementById("audio").dataset.aSongId,"']"));t&&t!=this.audio?(this.searchNextTrack(t),t.querySelector(".track__user-panel").appendChild(this.renderTrackProgress()),this.state.rhs=t.dataset.rhs,this.state.currentTrack=t.querySelector(".play-btn"),this.state.currentTrack.classList.add("play")):this.state.nextTrackNode=this.trackList[0]}}},{key:"changeTrack",value:function(t){this.trackProgress&&this.trackProgress.classList.add("hidden"),this.state.currentTrack&&this.state.currentTrack.classList.remove("play"),"next"==t?(this.state.currentTrack=this.state.nextTrackNode.querySelector(".play-btn"),this.state.currentTrack.classList.add("play"),this.play(this.state.nextTrackNode)):"prev"==t&&(this.state.currentTrack=this.state.prevTrackNode.querySelector(".play-btn"),this.state.currentTrack.classList.add("play"),this.play(this.state.prevTrackNode))}},{key:"switcher",value:function(){console.log("switcher with media"),"true"==this.audio.dataset.playing?(this.pause(),this.state.currentTrack&&this.state.currentTrack.classList.remove("play"),this.button.classList.toggle("player__constrols_pause"),this.audio.dataset.playing=!1):(this.continuePlaying(),this.state.currentTrack&&this.state.currentTrack.classList.add("play"),this.button.classList.toggle("player__constrols_pause"),this.audio.dataset.playing=!0)}},{key:"renderTrackProgress",value:function(){var t=document.createElement("div"),e=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");return t.classList.add("jp_container"),e.classList.add("jp-progress"),n.classList.add("jp-seek-bar"),r.classList.add("jp-play-bar"),this.trackProgress=t,this.trackProgressWrapper=e,this.trackProgressIndicator=r,this.trackProgressWrapper.onclick=this.rewind.bind(this),n.append(r),e.append(n),t.append(e),t}}])&&L(e.prototype,n),r&&L(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()},,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e),function(t){var e=n(3);t.SuccessAnimation=e.a,n(24).start(),n(40),n(143),n(120),n(145)}.call(this,n(22))},function(t,e,n){var r={"./app/img-artist-def/100/note-black.png":41,"./app/img-artist-def/100/note-gray.png":42,"./app/img-artist-def/100/note-red.png":43,"./app/img-artist-def/100/note-sky.png":44,"./app/img-artist-def/100/note-violette.png":45,"./app/img-artist-def/100/note-yellow.png":46,"./app/img-artist-def/250/note-black.png":47,"./app/img-artist-def/250/note-gray.png":48,"./app/img-artist-def/250/note-red.png":49,"./app/img-artist-def/250/note-sky.png":50,"./app/img-artist-def/250/note-violette.png":51,"./app/img-artist-def/250/note-yellow.png":52,"./app/img-artist-def/800/note-black.png":53,"./app/img-artist-def/800/note-gray.png":54,"./app/img-artist-def/800/note-red.png":55,"./app/img-artist-def/800/note-sky.png":56,"./app/img-artist-def/800/note-violette.png":57,"./app/img-artist-def/800/note-yellow.png":58,"./apple-touch-icon-114.png":59,"./apple-touch-icon-120.png":60,"./apple-touch-icon-144.png":61,"./apple-touch-icon-152.png":62,"./apple-touch-icon-180.png":63,"./apple-touch-icon-57.png":64,"./apple-touch-icon-60.png":65,"./apple-touch-icon-72.png":66,"./apple-touch-icon-76.png":67,"./apple-touch-icon-precomposed.png":68,"./apple-touch-icon.png":69,"./arrow.svg":70,"./bg.png":71,"./bottom-girls.png":72,"./default.svg":73,"./default_article_image.png":74,"./default_artist_image.png":75,"./default_artist_image_micro.jpg":76,"./default_artist_image_micro.png":77,"./default_song_image.png":78,"./default_song_image_micro.png":79,"./download.png":80,"./fullScreen_bg.png":81,"./genres-icon.png":82,"./google-play-icon.png":83,"./halloween_logo.png":84,"./head-background-sm.jpg":85,"./head-background-xs.jpg":86,"./head-background.jpg":87,"./icon_dislike.svg":88,"./icon_dislike_active.svg":89,"./icon_like.svg":90,"./icon_like_active.svg":91,"./icons/down_arrow.svg":92,"./icons/googleplay.png":93,"./icons/icon_download.svg":94,"./icons/up_arrow.svg":95,"./indicator2.gif":96,"./logo.png":97,"./mobile-icon.png":98,"./music-collection.png":99,"./mute.svg":100,"./no-image.jpg":101,"./pause-button-md.png":102,"./pause-button.png":103,"./pause-solid.svg":104,"./play-button-md.png":105,"./play-button.png":106,"./play-solid.svg":107,"./play_youtube.png":108,"./playlist.svg":109,"./speaker.svg":110,"./spinner.gif":111,"./star-icon.svg":112,"./tbr/rbt-icon.png":113,"./telegram-icon.png":114,"./video-player.svg":115,"./web-share.svg":116,"./yandex.png":117,"./yandex_bg_small.png":118,"./yandex_lg_full.png":119};function o(t){var e=i(t);return n(e)}function i(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id=40},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/100/note-black-f70347a51035e4bfe8b81601609f542b.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/100/note-gray-3961d86c962b77dcda297947ad76834e.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/100/note-red-7951adb6aa8bd5db279d738e2a34014a.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/100/note-sky-45f25f363a21cc151f56828d29e6b50e.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/100/note-violette-0c17da9642ddc96c3cf1c3b30a4419f9.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/100/note-yellow-1e530d25020fd2406ba36a4f7cf5c901.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/250/note-black-c639dacb78c553dda04673f90ad18fe5.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/250/note-gray-5581640b8061fe80deaec25ebda8829d.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/250/note-red-db66153639f8b527761f5ea18b790800.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/250/note-sky-0a8364ddd5a92df2401470876957c20e.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/250/note-violette-2a2ba9b563d356b456a6b1bf21794e12.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/250/note-yellow-2b35e754842f03e746fe4c123a2cf8cb.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/800/note-black-5316e319e9665f368ce35da740bacd61.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/800/note-gray-5889ec1a6538fc3c1c40fe002efe6b50.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/800/note-red-4360adb9c1f825d097c3e0abceebfa34.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/800/note-sky-58974b43c7aa4bb4bcc20f947022ad7e.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/800/note-violette-8bc227159af35ea302d4c4c690c1aa1e.png"},function(t,e,n){t.exports=n.p+"media/images/app/img-artist-def/800/note-yellow-68254bb8bbd1f9ce432b124545ed2e58.png"},function(t,e,n){t.exports=n.p+"media/images/apple-touch-icon-114-ccafaa3e33ca5ee8d5f60caf40a58c0d.png"},function(t,e,n){t.exports=n.p+"media/images/apple-touch-icon-120-7faee28cd73558d7d4f3727857d87a18.png"},function(t,e,n){t.exports=n.p+"media/images/apple-touch-icon-144-4537627c3d4ef63f4bcbbba49217d846.png"},function(t,e,n){t.exports=n.p+"media/images/apple-touch-icon-152-5a6313b092e0058ac5c4892194cdecfe.png"},function(t,e,n){t.exports=n.p+"media/images/apple-touch-icon-180-be517206fb841ba39e673792e7aea1b3.png"},function(t,e,n){t.exports=n.p+"media/images/apple-touch-icon-57-2ea8f1b4a81f9db8b8bc5c5a7a49bbd3.png"},function(t,e,n){t.exports=n.p+"media/images/apple-touch-icon-60-28da9337bf37c4a3a4ed684a24df5193.png"},function(t,e,n){t.exports=n.p+"media/images/apple-touch-icon-72-d94823569135b79eb919afc37d05c5e0.png"},function(t,e,n){t.exports=n.p+"media/images/apple-touch-icon-76-6397e6935b77482f660beee59af630be.png"},function(t,e,n){t.exports=n.p+"media/images/apple-touch-icon-precomposed-337875c44abf029e16e30c9ec4005ffb.png"},function(t,e,n){t.exports=n.p+"media/images/apple-touch-icon-1d31a9ffb4bc018a64863c073aafa6d6.png"},function(t,e,n){t.exports=n.p+"media/images/arrow-8ad9d3883b79a32c9950d4d9ed70d4f2.svg"},function(t,e,n){t.exports=n.p+"media/images/bg-84db2ec8cafafa3dee8e08b93f255426.png"},function(t,e,n){t.exports=n.p+"media/images/bottom-girls-53f3c5966585d0a728d503e45338aca6.png"},function(t,e,n){t.exports=n.p+"media/images/default-9300c3f5b217bc068705d5e9c7b8201d.svg"},function(t,e,n){t.exports=n.p+"media/images/default_article_image-6d12cd872afe2e9765c9cd1a4f4f68e0.png"},function(t,e,n){t.exports=n.p+"media/images/default_artist_image-7e31f15bad07c0ca3ceab0cebd65c4f6.png"},function(t,e,n){t.exports=n.p+"media/images/default_artist_image_micro-aee03c772f73ce4f0235e479493ceb60.jpg"},function(t,e,n){t.exports=n.p+"media/images/default_artist_image_micro-625aa51df6927cd21fbc9bc096eb1a9b.png"},function(t,e,n){t.exports=n.p+"media/images/default_song_image-ff03559542261b7daa8de7c35f4a737c.png"},function(t,e,n){t.exports=n.p+"media/images/default_song_image_micro-89f73b5b66ea5fa297b606288ce0db06.png"},function(t,e,n){t.exports=n.p+"media/images/download-3aef028bcd5384a462f03b1a879d6ec9.png"},function(t,e,n){t.exports=n.p+"media/images/fullScreen_bg-0ad41c69fdd9b343ffbb204ffa669610.png"},function(t,e,n){t.exports=n.p+"media/images/genres-icon-e4b6304758a85a2282a4cdb10c13f9e1.png"},function(t,e,n){t.exports=n.p+"media/images/google-play-icon-74a8f8ecd2b39b7ab4567e6e0da8b6ba.png"},function(t,e,n){t.exports=n.p+"media/images/halloween_logo-067483e1fa6544023a4e79073fd4ccd4.png"},function(t,e,n){t.exports=n.p+"media/images/head-background-sm-86eb746b9caa5b0bcf19d35ef280d541.jpg"},function(t,e,n){t.exports=n.p+"media/images/head-background-xs-8c11044ee8c5ad760a12e817246dc862.jpg"},function(t,e,n){t.exports=n.p+"media/images/head-background-f66066c30ab8db95a57726f24a753039.jpg"},function(t,e,n){t.exports=n.p+"media/images/icon_dislike-1290211b932f13747a52108007b87abd.svg"},function(t,e,n){t.exports=n.p+"media/images/icon_dislike_active-73925e21ccdebecfa1a771d392de7cc7.svg"},function(t,e,n){t.exports=n.p+"media/images/icon_like-3c65fd45d994a9cf948fc8137b42b1c0.svg"},function(t,e,n){t.exports=n.p+"media/images/icon_like_active-632d70fb1848ad31f3b0b5ef3206af81.svg"},function(t,e,n){t.exports=n.p+"media/images/icons/down_arrow-ce46680e46733bf7111555c27ec49a3d.svg"},function(t,e,n){t.exports=n.p+"media/images/icons/googleplay-985907d511eebfdc1cd52ebb18dca0cd.png"},function(t,e,n){t.exports=n.p+"media/images/icons/icon_download-d48644d689c31f88eb2113fdf00ddb47.svg"},function(t,e,n){t.exports=n.p+"media/images/icons/up_arrow-282b781cfb410945ea3edbcc125e7cda.svg"},function(t,e,n){t.exports=n.p+"media/images/indicator2-90733dd86bb0c9320fda338fe11f8994.gif"},function(t,e,n){t.exports=n.p+"media/images/logo-e1b78218e0932bdb52f58cfe06a0ac9e.png"},function(t,e,n){t.exports=n.p+"media/images/mobile-icon-586a74cb3589d6c091cf7fd2f536545c.png"},function(t,e,n){t.exports=n.p+"media/images/music-collection-5566cabaafd5e953b1d4297410a10a3c.png"},function(t,e,n){t.exports=n.p+"media/images/mute-6120a8f9de5b142402dd0c06ee3e5095.svg"},function(t,e,n){t.exports=n.p+"media/images/no-image-be07f152f276efca597cf7723df0b9ef.jpg"},function(t,e,n){t.exports=n.p+"media/images/pause-button-md-3d74b7d4bffadbfd5ee16c265660484b.png"},function(t,e,n){t.exports=n.p+"media/images/pause-button-a2e5f6a5bb1ce7bd7cd171494860015f.png"},function(t,e,n){t.exports=n.p+"media/images/pause-solid-9df23b0187bf5437722a95267de16a62.svg"},function(t,e,n){t.exports=n.p+"media/images/play-button-md-52ab2bd4233cba3504ef69cd447e86bd.png"},function(t,e,n){t.exports=n.p+"media/images/play-button-e9a1443993d010988ce3642707f907b0.png"},function(t,e,n){t.exports=n.p+"media/images/play-solid-3c7578b0bb8f6f5b7ce93977efc73570.svg"},function(t,e,n){t.exports=n.p+"media/images/play_youtube-f56138fb0ebbf9d6dc67df1248aaa008.png"},function(t,e,n){t.exports=n.p+"media/images/playlist-5b73771cb69b4f3c4affb3c6d39820a1.svg"},function(t,e,n){t.exports=n.p+"media/images/speaker-94143a2d012bd0507be26fcf2e732c5b.svg"},function(t,e,n){t.exports=n.p+"media/images/spinner-9f96b78b6ec0251c3b9db91d932f7735.gif"},function(t,e,n){t.exports=n.p+"media/images/star-icon-0836b17b6cdd5a8089d178deae2c20f3.svg"},function(t,e,n){t.exports=n.p+"media/images/tbr/rbt-icon-8e823f45f3e5b3de4db61fe00bfc382c.png"},function(t,e,n){t.exports=n.p+"media/images/telegram-icon-a7f6a0a4b2da39fa7901fb7fb2cc35f5.png"},function(t,e,n){t.exports=n.p+"media/images/video-player-76df04a90fed50ffa140a6c2bfccb275.svg"},function(t,e,n){t.exports=n.p+"media/images/web-share-5a16dadd68803be735e21328cb0d93d1.svg"},function(t,e,n){t.exports=n.p+"media/images/yandex-83e7e748452c96768ad7c9611ba006b0.png"},function(t,e,n){t.exports=n.p+"media/images/yandex_bg_small-e3f3416706c7bd07758aeef88c1d71b9.png"},function(t,e,n){t.exports=n.p+"media/images/yandex_lg_full-63c9398a161953afe45f5ce9bbca0ff9.png"},function(t,e){(function(){window.onerror=function(t,e,n,r,o){var i,a;return i=window.btoa(escape('"'+t+'", "'+e+'", "'+o+'", "'+n+'", "'+r+'"')),(a=new XMLHttpRequest).open("POST","/jserr/"+i,!0),a.send(),!1}}).call(this)},,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var r=n(25);function o(){document.querySelectorAll(".song-page").length&&(document.querySelectorAll(".song-wrap .play-btn").length&&function(){var t=[];t[0]=window.location.pathname.match(/\/music\/(\d+)/i)[1];var e=document.querySelector('meta[name="csrf-token"]'),n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-Token":e?e.getAttribute("content"):""},body:JSON.stringify({ids:t})};return fetch("/song_permissions/",n).then((function(t){return t.json()})).then((function(t){return t[0]})).catch((function(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 fetch \u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u0442\u0440\u0435\u043a\u0430 ".concat(t))}))}().then((function(t){!function(t){if(!1===t.playable){document.querySelector(".song-item-star").remove()}if(!1===t.downloadable){var e=document.querySelector("#download");e&&(e.outerHTML=""),document.querySelector(".btns #download-mp3-button").outerHTML='<div class="download download_copyrights">\n    <div class="download__icon download__icon_alert">\n    <svg width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path class="download__path download__path_alert" d="M0 27.0862C0 28.1314 0.407295 29.1141 1.14639 29.8536C1.88548 30.5933 2.86864 31 3.9138 31C4.95981 31 5.9424 30.5931 6.67981 29.8536L15.4994 21.0341L24.3169 29.8521C25.0558 30.5916 26.0383 30.9985 27.0844 30.9985C28.1304 30.9985 29.1139 30.5914 29.8509 29.8521C30.5897 29.1125 30.9975 28.1298 30.9975 27.0847C30.9975 26.0395 30.5897 25.0567 29.8509 24.3172L21.0338 15.4997L29.8528 6.6808C30.5914 5.9417 30.9991 4.95896 30.9991 3.9138C30.9991 2.86864 30.5914 1.88548 29.8528 1.14639C29.1139 0.407295 28.1313 0 27.0853 0C26.04 0 25.0574 0.407295 24.3188 1.14653L15.5003 9.96615L6.68079 1.14653C5.94254 0.407295 4.95981 0 3.91465 0C2.86864 0 1.88548 0.407295 1.14723 1.14653C0.408139 1.88562 0.00070296 2.86878 0.00070296 3.91394C0.00070296 4.95911 0.407998 5.9417 1.14723 6.68094L9.96685 15.4999L1.14639 24.3188C0.407295 25.0583 0 26.041 0 27.0862ZM2.36968 25.5429L11.8006 16.1112C11.9631 15.9492 12.0538 15.7296 12.0538 15.5004C12.0538 15.2711 11.963 15.0508 11.8006 14.8891L2.36968 5.45821C1.95648 5.04543 1.7297 4.49712 1.7297 3.9138C1.7297 3.33006 1.95718 2.78119 2.36968 2.36884C2.78288 1.95648 3.33006 1.72886 3.91465 1.72886C4.49796 1.72886 5.04711 1.95648 5.45835 2.36884L14.8891 11.7993C15.2133 12.1235 15.7875 12.1235 16.1116 11.7993L25.5411 2.36884C26.3659 1.54314 27.8052 1.54483 28.6302 2.36884C29.0431 2.78204 29.2701 3.32992 29.2701 3.9138C29.2701 4.49712 29.0431 5.04641 28.6302 5.45821L19.2002 14.8883C18.8625 15.2263 18.8625 15.7726 19.2002 16.111L28.6286 25.5386C29.0414 25.9515 29.2676 26.5002 29.2676 27.0835C29.2676 27.6668 29.0414 28.2157 28.6278 28.6283C27.8053 29.4532 26.3651 29.454 25.5395 28.6283L16.1116 19.2008C15.7734 18.8624 15.2272 18.8624 14.8891 19.2008L5.4575 28.6317C4.6356 29.4564 3.19538 29.4573 2.36982 28.6317C1.95662 28.2188 1.72984 27.6701 1.72984 27.0868C1.72984 26.5037 1.95648 25.955 2.36968 25.5429Z" fill="#B5C3E4"/>\n    </svg>\n    </div>\n    <span class="download__text download__text_alert ">\u0422\u0440\u0435\u043a \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d \u0434\u043b\u044f \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f</span>\n  </div>'}}(t)})))}function i(){var t=document.querySelector(".up-arrow");t&&(t.hidden=!0,t.onclick=function(){window.scrollTo(pageXOffset,0)},window.addEventListener("scroll",(function(){pageYOffset<document.documentElement.clientHeight?t.classList.add("hidden"):t.classList.remove("hidden")})))}var a=n(8);function s(){var t=document.querySelectorAll(".video");t.length&&t.forEach((function(t){!function(t){var e=t.querySelector(".video__link"),n=(t.querySelector(".video__media"),t.querySelector(".video__button")),r=t.getAttribute("id");t.addEventListener("click",(function(o){o.preventDefault();var i=function(t){var e=document.createElement("iframe");return e.setAttribute("allowfullscreen",""),e.setAttribute("src",function(t){return"https://www.youtube.com/embed/"+t+"?rel=0&showinfo=0&autoplay=1"}(t)),e.classList.add("video__media"),e}(r);e.remove(),n.remove(),t.appendChild(i)})),t.classList.add("video--enabled")}(t)}))}var c=n(7),u=n(1);var l=n(0);function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"basicMetrics",value:function(){var t=document.querySelector(".js-yandexBrowser-btn"),e=document.querySelector(".js-yandexBrowserAndroid-btn");t&&(t.onclick=function(){ym(53320615,"reachGoal","ya_download")}),e&&(e.onclick=function(){ym(53320615,"reachGoal","ya_market")});var n=document.querySelector(".js-dw-btn");n&&(n.onclick=function(t){if(ym(53320615,"reachGoal","click_download"),"true"!==Object(u.a)("yandexFull")){t.preventDefault();var e=new Date;e.setTime(e.getTime()+36e5),Object(u.b)("yandexFull",!0,{expires:e,path:"/"}),ym(53320615,"reachGoal","ya_show"),function(t){var e=t.getAttribute("href"),n=document.querySelector("#fullscreen-yandex");if(n){var r=document.querySelector(".fullscreen-adv__timer");r.innerHTML=20,n.style.display="flex";var o=document.querySelector(".fullscreen-adv__link");o.setAttribute("href",e),o.onclick=function(){clearInterval(i),n.style.display="none"};var i=setInterval((function(){var t=r.innerHTML;(t-=1)>=1?r.innerHTML=t:(n.style.display="none",clearInterval(i),window.location=e)}),1e3)}}(t.currentTarget)}var r="/dwn/"+n.dataset.trackId,o=Object(l.a)("POST");fetch(r,o)}),setTimeout((function(){var t=document.querySelectorAll(".main-setka .stripe");console.log("el: "+t.length),t.length&&t.forEach((function(t){t.addEventListener("click",(function(){fetch("/callbacks/setka-counter",{method:"POST"}),ym(53320615,"reachGoal","to_setka"),console.log("to_setka")}),!1)}))}),1e3)}},{key:"changeLang",value:function(){ym(53320615,"reachGoal","change_lang")}},{key:"changeNoKz",value:function(){ym(53320615,"reachGoal","more_kz_no")}},{key:"changeYesKz",value:function(){ym(53320615,"reachGoal","more_kz_yse")}},{key:"isShowingWindow",value:function(){console.log("is show window"),ym(53320615,"reachGoal","more_kz_show_popup")}}],(n=null)&&d(e.prototype,n),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(){var t=Array.from(document.querySelectorAll('[data-toggle="collapse"]'));window.addEventListener("click",(function(e){var r=e.target.closest('[data-toggle="collapse"]');if(null!=r&&t.includes(r)){var o=r.getAttribute("data-target");n(o,"toggle")}}),!1);var e={toggle:"toggle",show:"add",hide:"remove"},n=function(t,n){console.log(t,n),Array.from(document.querySelectorAll(t)).forEach((function(t){t.classList[e[n]]("show")}))}}var f=function(){if(navigator.share){var t=document.getElementById("web-share");if(t){t.classList.remove("hidden");var e=document.title,n=window.location.href;t.onclick=function(){navigator.share({title:e,url:n,text:e}).catch((function(t){return console.log("Error sharing",t)}))}}}};function y(t){var e,n;return function(t,e){var n=[];for(;t.length;)n.push(t.splice(0,e));return n}((e=document.querySelectorAll("div.song-item"),n=new Set,e.forEach((function(t){if(!t.querySelector(".w")){var e=t.dataset.aSongId.match(/song-(\d+)/i)[1];n.add("".concat(e))}})),Array.from(n)),t)}function v(){v=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(q){c=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),s=new x(o||[]);return r(a,"_invoke",{value:_(t,n,s)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(q){return{type:"throw",arg:q}}}t.wrap=u;var d={};function h(){}function p(){}function f(){}var y={};c(y,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(T([])));m&&m!==e&&n.call(m,i)&&(y=m);var b=f.prototype=h.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function o(r,i,a,s){var c=l(t[r],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=L(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function L(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=f,r(b,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:p,configurable:!0}),p.displayName=c(f,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,c(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(k.prototype),c(k.prototype,a,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),c(b,s,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=T,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function g(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,o)}function m(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){g(i,r,o,a,s,"next",t)}function s(t){g(i,r,o,a,s,"throw",t)}a(void 0)}))}}function b(){document.querySelectorAll("div.song-item").forEach((function(t){t.querySelector(".play-btn").classList.add("disabled"),t.classList.add("wrong")})),function(){w.apply(this,arguments)}()}function w(){return(w=m(v().mark((function t(){var e,n,r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=y(100),_(y(100)),n=Object(l.a)("POST"),r=[],e.forEach((function(t,e){n.body=JSON.stringify({ids:t}),r[e]=fetch("/song_permissions/",n).then((function(t){return t.json()})).then((function(t){var e=document.querySelector(".c-button_download-fill"),n=document.querySelector("#download > .c-button_download");return t.forEach((function(t){e&&!0===t.allowed&&e.dataset.trackId==t.id&&e.setAttribute("href",t.cdn_download_url),n&&!0===t.allowed&&n.dataset.trackId==t.id&&n.setAttribute("href",t.cdn_download_url),k(t)})),!0})).catch((function(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 fetch ".concat(t))}))})),Promise.all(r).then((function(t){window.Player.initialization()}));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(t){var e=document.querySelectorAll("[data-a-song-id='song-".concat(t.id,"']")),n=document.getElementById("audio");e.forEach((function(e){if(e!=n){if(t.playable){e.classList.remove("wrong"),e.querySelector(".play-btn").classList.remove("disabled"),e.querySelector(".play-btn").classList.remove("play");var r=e.querySelector(".jp_container");r&&(r.style.display="none")}t.downloadable&&e.querySelector(".js-download")&&e.querySelector(".js-download").classList.remove("download_disabled"),!0===t.allowed&&e.querySelector(".play-btn").setAttribute("href",t.cdn_play_url),"275775"===t.id&&e.querySelector(".play-btn").setAttribute("href",t.cdn_play_url)}}))}function _(t){var e=Object(l.a)("POST");t.forEach((function(t){e.body=JSON.stringify({ids:t}),fetch("/cfav/",e).then((function(t){return t.json()})).then((function(t){t.forEach((function(t){document.querySelectorAll(".add-favorites-btn[data-song-id='".concat(t,"']")).forEach((function(t){t.dataset.favorite="1";var e=t.querySelector(".track__icon_favorite");e&&e.classList.add("track__icon_active")}))}))})).catch((function(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 fetch ".concat(t))}))}))}var L=n(24),S=n.n(L);function E(){E=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(q){c=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),s=new x(o||[]);return r(a,"_invoke",{value:k(t,n,s)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(q){return{type:"throw",arg:q}}}t.wrap=u;var d={};function h(){}function p(){}function f(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=f.prototype=h.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,s){var c=l(t[r],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function k(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=_(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=f,r(m,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:p,configurable:!0}),p.displayName=c(f,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,c(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(m),c(m,s,"Generator"),c(m,i,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=T,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function x(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,o)}function T(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){x(i,r,o,a,s,"next",t)}function s(t){x(i,r,o,a,s,"throw",t)}a(void 0)}))}}function P(){return(P=T(E().mark((function t(){var e,c,l,d,y,v,g,m,w,k,_,L,x,T;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g=function(t){var e=new Date;e.setTime(e.getTime()+216e6),Object(u.b)("chooseLang",t,{expires:e,path:"/"}),S.a.visit(window.location.href)},v=function(){h.changeLang();var t=Object(u.a)("chooseLang");g("ru"===t?"kz":"ru")},y=function(t){var e=Object(u.a)("chooseLang"),n=t.querySelector("#left-top"),r=t.querySelector("#right-bottom");e&&(n.classList.remove("lang__group_current"),r.classList.remove("lang__group_current"),"ru"===e?r.classList.add("lang__group_current"):n.classList.add("lang__group_current"))},document.querySelector(".js-modal-message")&&(h.isShowingWindow(),e=document.querySelector(".js-modal-message"),c=document.querySelector(".js-set-lang-kz"),l=document.querySelector(".js-set-lang-rus"),c.onclick=function(t){t.stopPropagation(),h.changeYesKz(),e.classList.add("hidden"),g("kz")},l.onclick=function(t){t.stopPropagation(),h.changeYesKz(),e.classList.add("hidden"),g("ru")}),document.querySelector(".lang")&&(d=document.querySelector(".lang"),y(d),d.onclick=v),void 0===window.Player?window.Player=new r.a:window.Player=window.Player,A(),(m=window.googletag||{}).cmd=m.cmd||[],w=window.notsyInit?window.notsyInit:function(t){window.notsyPageSettings=t},"2"==Object(u.a)("viewConter")&&navigator.userAgent.match(/mobile|android|iphone|ipad|ipod/i)?(console.log("\u0420\u0435\u043a\u043b\u0430\u043c\u0430 \u043f\u043e \u043a\u0443\u043a\u0430\u043c"),window.yaContextCb.push((function(){Ya.adfoxCode.create({ownerId:265568,containerId:"adfox_165390812335291618",params:{p1:"cuceb",p2:"hqjt"}})}))):(k=navigator.userAgent.match(/mobile|android|iphone|ipad|ipod/i)?"main_page_mobile":"main_page_desktop",w({page:k,targeting:[["variation",Object(u.a)("screen_type")]]})),b(),j(),q(),C(),o(),O(),I(".js-dropdown"),p(),f(),i(),s(),(new a.a).initialization(),!document.querySelector("#likes")){t.next=30;break}return t.next=28,n.e(11).then(n.bind(null,149));case 28:t.sent.default();case 30:if(!document.getElementById("zaycev_net")){t.next=36;break}return t.next=34,n.e(12).then(n.bind(null,150));case 34:t.sent.default();case 36:if(!(_=document.querySelectorAll(".autocomplete")).length){t.next=42;break}return t.next=40,n.e(9).then(n.bind(null,151));case 40:L=t.sent,_.forEach((function(t){new L.default(t.getAttribute("id"))}));case 42:if(!(x=document.querySelectorAll(".comments")).length){t.next=48;break}return t.next=46,n.e(10).then(n.bind(null,152));case 46:T=t.sent,x.forEach((function(t){new T.default(t)}));case 48:(document.getElementById("p-theme")||document.getElementById("genre-page"))&&document.querySelector(".t-dsc-crop")&&(document.querySelector(".t-dsc-crop").onclick=function(){this.classList.toggle("t-dsc-crop")});case 49:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(){var t=document.querySelectorAll(".overlay_block");document.querySelector("body").classList.remove("body_fixed"),t.forEach((function(t){t.closest(".overlay").remove()}))}function C(){var t=sessionStorage.getItem("viewCounter");t=++t,sessionStorage.setItem("viewCounter",t)}function j(){var t=document.querySelector(".js-close");t&&(t.onclick=function(e){e.preventDefault(),t.remove()})}function A(){var t=Object(u.a)("viewConter");if(t){var e=t;if(e>4)return;++e;var n=new Date;n.setTime(n.getTime()+216e5),Object(u.b)("viewConter",e,{expires:n,path:"/"})}else{var r=new Date;r.setTime(r.getTime()+216e5),Object(u.b)("viewConter",1,{expires:r,path:"/"})}}function O(){Object(c.a)(),h.basicMetrics(),function(){if(document.querySelectorAll(".lyric").length){var t="\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0435\u043a\u0441\u0442 \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e...";document.querySelectorAll(".expand-button").length&&(document.querySelector(".expand-button").textContent=t,document.querySelector(".expand-button").addEventListener("click",(function(){document.querySelector(".lyric__text").classList.toggle("lyric__text_expanded"),document.querySelector(".lyric__text").classList.contains("lyric__text_expanded")?document.querySelector(".expand-button").textContent="\u0421\u043a\u0440\u044b\u0442\u044c \u0442\u0435\u043a\u0441\u0442":document.querySelector(".expand-button").textContent=t})))}}(),function(){if("undefined"!=typeof gtag){var t=document.querySelector("#mobile-web");t&&(t.onclick=function(){gtag("event","webApp",{event_category:"click"})});var e=document.querySelector(".mobile-app-link");e&&(e.onclick=function(){gtag("event","mobile-app-link",{event_category:"click"}),ym(53320615,"reachGoal","mobile-app-link")});var n=document.querySelector(".mobile-app-promo");n&&(n.onclick=function(){gtag("event","mobile-app-promo",{event_category:"click"}),ym(53320615,"reachGoal","mobile-app-promo")});var r=document.querySelector(".party-youtube");r&&(r.onclick=function(){ym(53320615,"reachGoal","click_youtube")})}}()}function I(t){var e=document.querySelector(t);if(null!=e){var n=e.querySelector(".dropdown-menu");null!=n&&(e.onclick=function(){n.classList.toggle("dropdown-menu_show")})}}window.Favorite=new a.a,window.YandexShare={},document.addEventListener("turbolinks:load",(function(){return P.apply(this,arguments)})),YandexShare.init=function(){"undefined"!=typeof Ya&&"function"==typeof Ya.share2&&Ya.share2("ya-share2")}},,function(t,e,n){"use strict";n.r(e);var r=n(9),o=n(15),i=n(20),a=n(4),s=(n(25),n(16)),c=n(0),u=n(2),l=n(8);function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),console.log("User constructor"),this.id=e,this.playlistsTab=document.querySelector(".js-tab-playlists"),this.articlesTab=document.querySelector(".js-tab-articles"),this.tracksTab=document.querySelector(".js-tab-tracks"),this.articlesTab.onclick=this.getArticles.bind(this),this.playlistsTab.onclick=this.getPlaylists.bind(this),this.tracksTab.onclick=this.getTracks.bind(this),this.playlistsData,this.articlesData,this.tracksData,this.token=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),this.fetchOptions=Object(c.a)("GET"),this.toggleTab=this.toggleTab.bind(this),this.getTracks()}var e,n,r;return e=t,(n=[{key:"getPlaylists",value:function(){var t=this;this.toggleTab(this.playlistsTab),p(),this.playlistsData?f(this.playlistsData,"playlist"):fetch("/api/v1/web/users/".concat(this.id,"/playlists"),this.fetchOptions).then((function(t){if(t.ok)return t.json()})).then((function(e){t.playlistsData=e,f(t.playlistsData,"playlist")})).catch((function(t){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043f\u043b\u0435\u0439\u043b\u0438\u0441\u0442\u043e\u0432 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"+t)}))}},{key:"getArticles",value:function(){var t=this;this.toggleTab(this.articlesTab),p(),this.articlesData?f(this.articlesData,"article"):fetch("/api/v1/web/users/".concat(this.id,"/articles"),this.fetchOptions).then((function(t){if(t.ok)return t.json()})).then((function(e){t.articlesData=e.items,f(t.articlesData,"article")})).catch((function(t){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u0442\u0430\u0442\u0435\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"+t)}))}},{key:"getTracks",value:function(){var t=this;if(this.toggleTab(this.tracksTab),p(),this.tracksData){var e=document.querySelector(".user-page__content");e.innerHTML="",e.append(this.tracksData)}else fetch("/api/v1/web/users/".concat(this.id,"/favorite_songs"),this.fetchOptions).then((function(t){if(t.ok)return t.json()})).then((function(e){t.tracksData=e.items,t.tracksData=f(t.tracksData,"tracks")})).catch((function(t){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0442\u0440\u0435\u043a\u043e\u0432 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f "+t)}))}},{key:"toggleTab",value:function(t){this.playlistsTab.classList.remove("nav-link_active"),this.articlesTab.classList.remove("nav-link_active"),this.tracksTab.classList.remove("nav-link_active"),t.classList.add("nav-link_active")}}])&&d(e.prototype,n),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(){document.querySelector(".user-page__content").innerHTML='<div class="lds-ring"><div></div><div></div><div></div><div></div></div>'}function f(t,e){var n=document.querySelector(".user-page__content");if(n.innerHTML="","playlist"===e&&t.forEach((function(t){n.append(Object(r.a)(t))})),"article"===e){var c=document.createElement("div");c.classList.add("cards-list"),n.append(c),t.forEach((function(t){c.append(Object(o.a)(t))}))}if("tracks"===e){var d=Object(a.a)("div",["playlist"]);return t.forEach((function(t){if(t.play_url){var e=i.a.renderHTML(t);d.append(function(t,e){var n=t.querySelector(".add-favorites-btn");if(!1!==e.favorite){n.dataset.favorite="1";var r=n.querySelector(".track__icon_favorite");r&&r.classList.add("track__icon_active")}if(0===Object(u.a)()&&""!==t){t.querySelector(".js-add-more-btn").remove()}return t}(e,t))}})),n.append(d),window.Player.initialization(),Object(s.a)(),(new l.a).initialization(),d}}var y=n(3);function v(t){var e=document.querySelector("#avatar");e&&(e.onchange=g.bind(this,t))}function g(t,e){var n=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),r=new FormData;r.append("user[avatar]",e.currentTarget.files[0]);var o={method:"PATCH",headers:{"X-CSRF-Token":n},body:r},i=" /users/".concat(t);fetch(i,o).then((function(t){if(422===t.status||201===t.status)return t.json()})).then((function(e){if(e.errors)e.errors.forEach((function(t){new y.a(t,"error").animate()}));else{var n=document.querySelectorAll(".avatar__image");t!==Object(u.a)()?n[1].src=e.avatar.square_128:n.forEach((function(t){t.src=e.avatar.square_128}))}})).catch((function(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043d\u043e\u0432\u043e\u0433\u043e \u0430\u0432\u0430\u0442\u0430\u0440\u0430",t),new y.a("\u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a...","error").animate()}))}function m(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w(t){return m(document.querySelectorAll(t+":checked")).map((function(t){return t.value}))}function k(){var t=document.querySelector(".js-checked-delete-mode"),e=document.querySelectorAll(".set-box-btns .btn"),n=document.querySelector(".checkbox__text_add"),r=document.querySelector(".checkbox__text_delete");_(e,"add"),t&&(t.onchange=function(t){var o=document.querySelector("body");t.currentTarget.checked?(o.classList.add("delete-genre-mode"),_(e,"delete"),r.classList.remove("checkbox__text_hidden"),n.classList.add("checkbox__text_hidden")):(_(e),o.classList.remove("delete-genre-mode","add"),r.classList.add("checkbox__text_hidden"),n.classList.remove("checkbox__text_hidden"))})}function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add";t.length&&"add"===e?t.forEach((function(t){t.onclick=L})):t.length&&"delete"===e&&t.forEach((function(t){t.onclick=S}))}function L(t){var e,n=t.currentTarget.getAttribute("set_box_num");e=n,document.querySelectorAll(".upload-results .tag-list a[box_num='".concat(e,"']")).forEach((function(t){setTimeout((function(){t.click()}),100)}))}function S(t){var e=t.currentTarget.dataset.boxId,n=t.currentTarget,r="/my/boxes/remove-from-favorite?data=".concat(e),o=Object(c.a)("DELETE");fetch(r,o).then((function(t){200===t.status&&n.remove()}))}function E(t,e,n,r,o){var i=Object(c.a)(n);i.body=JSON.stringify({song_ids:e,data:r}),fetch(t,i).then((function(t){return t.json()})).then((function(t){if(o){var e=document.querySelector(".set-box-btns");e.innerHTML="",t.favorite_boxes.forEach((function(t,n){!function(t,e,n){if(n){var r='<div class="btn btn-light border btn-xs collection-item" data-box-id="'.concat(t.id,'" set_box_num="').concat(e,'" title="').concat(t.name,'">\n                  ').concat(t.name,"\n                </div>");n.insertAdjacentHTML("beforeEnd",r)}}(t,n,e)})),k()}else!function(t){var e=function(e){var n=document.querySelector('.tag-list[data-track-id="'.concat(e,'"'));t[e].forEach((function(t){var e=n.querySelector('[data-box-id="'.concat(t,'"]'));e&&(e.classList.remove("btn-light"),e.classList.add("btn-success"))}))};for(var n in t)e(n)}(t)}))}function x(t){return function(t){if(Array.isArray(t))return T(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function P(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=document.querySelector(t);if(o){var i=o.dataset.url;o.onclick=function(t){t.preventDefault(),q(i,e,n,r)}}}function q(t,e,n,r){var o;E(t,w(".shift_select"),e,(o=n,x(document.querySelector(o).options).filter((function(t){return t.selected})).map((function(t){return t.value}))),r)}document.addEventListener("turbolinks:load",(function(){if(k(),P(".js-set-box","POST","#box_ids"),P(".set-box","POST","#box_ids_fav",!0),P(".btn-add-tag","POST","#genre_list"),document.querySelector(".user-page__content")){var t=document.querySelector(".user-page").dataset.userId;new h(t),v(t)}}))}]);